<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>useTransition - React 18 Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Get Started</li><li class="chapter-item expanded "><a href="../../learn/index.html"><strong aria-hidden="true">1.</strong> Quick Start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/tutorial-tic-tac-toe.html"><strong aria-hidden="true">1.1.</strong> Tutorial: Tic-Tac-Toe</a></li><li class="chapter-item expanded "><a href="../../learn/thinking-in-react.html"><strong aria-hidden="true">1.2.</strong> Thinking in React</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Learn React</li><li class="chapter-item expanded "><a href="../../learn/describing-the-ui.html"><strong aria-hidden="true">2.</strong> Describing the UI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/your-first-component.html"><strong aria-hidden="true">2.1.</strong> Your First Component</a></li><li class="chapter-item expanded "><a href="../../learn/importing-and-exporting-components.html"><strong aria-hidden="true">2.2.</strong> Importing and Exporting Components</a></li><li class="chapter-item expanded "><a href="../../learn/writing-markup-with-jsx.html"><strong aria-hidden="true">2.3.</strong> WritiPng Markup with JSX</a></li><li class="chapter-item expanded "><a href="../../learn/javascript-in-jsx-with-curly-braces.html"><strong aria-hidden="true">2.4.</strong> JavaScript in JSX with Curly Braces</a></li><li class="chapter-item expanded "><a href="../../learn/passing-props-to-a-component.html"><strong aria-hidden="true">2.5.</strong> Passing Props to a Component</a></li><li class="chapter-item expanded "><a href="../../learn/conditional-rendering.html"><strong aria-hidden="true">2.6.</strong> Conditional Rendering</a></li><li class="chapter-item expanded "><a href="../../learn/rendering-lists.html"><strong aria-hidden="true">2.7.</strong> Rendering Lists</a></li><li class="chapter-item expanded "><a href="../../learn/keeping-components-pure.html"><strong aria-hidden="true">2.8.</strong> Keeping Components Pure</a></li></ol></li><li class="chapter-item expanded "><a href="../../learn/adding-interactivity.html"><strong aria-hidden="true">3.</strong> Adding Interactivity</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/responding-to-events.html"><strong aria-hidden="true">3.1.</strong> Responding to Events</a></li><li class="chapter-item expanded "><a href="../../learn/state-a-components-memory.html"><strong aria-hidden="true">3.2.</strong> State: A Component's Memory</a></li><li class="chapter-item expanded "><a href="../../learn/render-and-commit.html"><strong aria-hidden="true">3.3.</strong> Render and Commit</a></li><li class="chapter-item expanded "><a href="../../learn/state-as-a-snapshot.html"><strong aria-hidden="true">3.4.</strong> State as a Snapshot</a></li><li class="chapter-item expanded "><a href="../../learn/queueing-a-series-of-state-updates.html"><strong aria-hidden="true">3.5.</strong> Queueing a Series of State Updates</a></li><li class="chapter-item expanded "><a href="../../learn/updating-objects-in-state.html"><strong aria-hidden="true">3.6.</strong> Updating Objects in State</a></li><li class="chapter-item expanded "><a href="../../learn/updating-arrays-in-state.html"><strong aria-hidden="true">3.7.</strong> Updating Arrays in State</a></li></ol></li><li class="chapter-item expanded "><a href="../../learn/managing-state.html"><strong aria-hidden="true">4.</strong> Managing State</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/reacting-to-input-with-state.html"><strong aria-hidden="true">4.1.</strong> Reacting to Input with State</a></li><li class="chapter-item expanded "><a href="../../learn/choosing-the-state-structure.html"><strong aria-hidden="true">4.2.</strong> Choosing the State Structure</a></li><li class="chapter-item expanded "><a href="../../learn/sharing-state-between-components.html"><strong aria-hidden="true">4.3.</strong> Sharing State Between Components</a></li><li class="chapter-item expanded "><a href="../../learn/preserving-and-resetting-state.html"><strong aria-hidden="true">4.4.</strong> Preserving and Resetting State</a></li><li class="chapter-item expanded "><a href="../../learn/extracting-state-logic-into-a-reducer.html"><strong aria-hidden="true">4.5.</strong> Extracting State Logic into a Reducer</a></li><li class="chapter-item expanded "><a href="../../learn/passing-data-deeply-with-context.html"><strong aria-hidden="true">4.6.</strong> Passing Data Deeply with Context</a></li><li class="chapter-item expanded "><a href="../../learn/scaling-up-with-reducer-and-context.html"><strong aria-hidden="true">4.7.</strong> Scaling Up with Reducer and Context</a></li></ol></li><li class="chapter-item expanded "><a href="../../learn/escape-hatches.html"><strong aria-hidden="true">5.</strong> Escape Hatches</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/referencing-values-with-refs.html"><strong aria-hidden="true">5.1.</strong> Referencing Values with Refs</a></li><li class="chapter-item expanded "><a href="../../learn/manipulating-the-dom-with-refs.html"><strong aria-hidden="true">5.2.</strong> Manipulating the DOM with Refs</a></li><li class="chapter-item expanded "><a href="../../learn/synchronizing-with-effects.html"><strong aria-hidden="true">5.3.</strong> Synchronizing with Effects</a></li><li class="chapter-item expanded "><a href="../../learn/you-might-not-need-an-effect.html"><strong aria-hidden="true">5.4.</strong> You Might Not Need an Effect</a></li><li class="chapter-item expanded "><a href="../../learn/lifecycle-of-reactive-effects.html"><strong aria-hidden="true">5.5.</strong> Lifecycle of Reactive Effects</a></li><li class="chapter-item expanded "><a href="../../learn/separating-events-from-effects.html"><strong aria-hidden="true">5.6.</strong> Separating Events from Effects</a></li><li class="chapter-item expanded "><a href="../../learn/removing-effect-dependencies.html"><strong aria-hidden="true">5.7.</strong> Removing Effect Dependencies</a></li><li class="chapter-item expanded "><a href="../../learn/reusing-logic-with-custom-hooks.html"><strong aria-hidden="true">5.8.</strong> Reusing Logic with Custom Hooks</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference</li><li class="chapter-item expanded affix "><li class="part-title">'react' package</li><li class="chapter-item expanded "><a href="../../reference/react/components.html"><strong aria-hidden="true">6.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/Fragment.html"><strong aria-hidden="true">6.1.</strong> &lt;Fragment&gt; (&lt;&gt;...&lt;/&gt;)</a></li><li class="chapter-item expanded "><a href="../../reference/react/Profiler.html"><strong aria-hidden="true">6.2.</strong> &lt;Profiler&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react/StrictMode.html"><strong aria-hidden="true">6.3.</strong> &lt;StrictMode&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react/Suspense.html"><strong aria-hidden="true">6.4.</strong> &lt;Suspense&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react/index.html"><strong aria-hidden="true">7.</strong> Hooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/useCallback.html"><strong aria-hidden="true">7.1.</strong> useCallback</a></li><li class="chapter-item expanded "><a href="../../reference/react/useContext.html"><strong aria-hidden="true">7.2.</strong> useContext</a></li><li class="chapter-item expanded "><a href="../../reference/react/useDebugValue.html"><strong aria-hidden="true">7.3.</strong> useDebugValue</a></li><li class="chapter-item expanded "><a href="../../reference/react/useDeferredValue.html"><strong aria-hidden="true">7.4.</strong> useDeferredValue</a></li><li class="chapter-item expanded "><a href="../../reference/react/useEffect.html"><strong aria-hidden="true">7.5.</strong> useEffect</a></li><li class="chapter-item expanded "><a href="../../reference/react/useId.html"><strong aria-hidden="true">7.6.</strong> useId</a></li><li class="chapter-item expanded "><a href="../../reference/react/useImperativeHandle.html"><strong aria-hidden="true">7.7.</strong> useImperativeHandle</a></li><li class="chapter-item expanded "><a href="../../reference/react/useInsertionEffect.html"><strong aria-hidden="true">7.8.</strong> useInsertionEffect</a></li><li class="chapter-item expanded "><a href="../../reference/react/useLayoutEffect.html"><strong aria-hidden="true">7.9.</strong> useLayoutEffect</a></li><li class="chapter-item expanded "><a href="../../reference/react/useMemo.html"><strong aria-hidden="true">7.10.</strong> useMemo</a></li><li class="chapter-item expanded "><a href="../../reference/react/useReducer.html"><strong aria-hidden="true">7.11.</strong> useReducer</a></li><li class="chapter-item expanded "><a href="../../reference/react/useRef.html"><strong aria-hidden="true">7.12.</strong> useRef</a></li><li class="chapter-item expanded "><a href="../../reference/react/useState.html"><strong aria-hidden="true">7.13.</strong> useState</a></li><li class="chapter-item expanded "><a href="../../reference/react/useSyncExternalStore.html"><strong aria-hidden="true">7.14.</strong> useSyncExternalStore</a></li><li class="chapter-item expanded "><a href="../../reference/react/useTransition.html" class="active"><strong aria-hidden="true">7.15.</strong> useTransition</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react/apis.html"><strong aria-hidden="true">8.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/createContext.html"><strong aria-hidden="true">8.1.</strong> createContext</a></li><li class="chapter-item expanded "><a href="../../reference/react/forwardRef.html"><strong aria-hidden="true">8.2.</strong> forwardRef</a></li><li class="chapter-item expanded "><a href="../../reference/react/lazy.html"><strong aria-hidden="true">8.3.</strong> lazy</a></li><li class="chapter-item expanded "><a href="../../reference/react/memo.html"><strong aria-hidden="true">8.4.</strong> memo</a></li><li class="chapter-item expanded "><a href="../../reference/react/startTransition.html"><strong aria-hidden="true">8.5.</strong> startTransition</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">'react-dom' package</li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/index.html"><strong aria-hidden="true">9.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/components/common.html"><strong aria-hidden="true">9.1.</strong> Common components (e.g. &lt;div&gt;)</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/input.html"><strong aria-hidden="true">9.2.</strong> &lt;input&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/option.html"><strong aria-hidden="true">9.3.</strong> &lt;option&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/progress.html"><strong aria-hidden="true">9.4.</strong> &lt;progress&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/select.html"><strong aria-hidden="true">9.5.</strong> &lt;select&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/textarea.html"><strong aria-hidden="true">9.6.</strong> &lt;textarea&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react-dom/index.html"><strong aria-hidden="true">10.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/createPortal.html"><strong aria-hidden="true">10.1.</strong> createPortal</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/flushSync.html"><strong aria-hidden="true">10.2.</strong> flushSync</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/findDOMNode.html"><strong aria-hidden="true">10.3.</strong> findDOMNode</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/hydrate.html"><strong aria-hidden="true">10.4.</strong> hydrate</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/render.html"><strong aria-hidden="true">10.5.</strong> render</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/unmountComponentAtNode.html"><strong aria-hidden="true">10.6.</strong> unmountComponentAtNode</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react-dom/client/index.html"><strong aria-hidden="true">11.</strong> Client APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/client/createRoot.html"><strong aria-hidden="true">11.1.</strong> createRoot</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/client/hydrateRoot.html"><strong aria-hidden="true">11.2.</strong> hydrateRoot</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/index.html"><strong aria-hidden="true">12.</strong> Server APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToNodeStream.html"><strong aria-hidden="true">12.1.</strong> renderToNodeStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToPipeableStream.html"><strong aria-hidden="true">12.2.</strong> renderToPipeableStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToReadableStream.html"><strong aria-hidden="true">12.3.</strong> renderToReadableStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToStaticMarkup.html"><strong aria-hidden="true">12.4.</strong> renderToStaticMarkup</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToStaticNodeStream.html"><strong aria-hidden="true">12.5.</strong> renderToStaticNodeStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToString.html"><strong aria-hidden="true">12.6.</strong> renderToString</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Legacy APIs</li><li class="chapter-item expanded "><a href="../../reference/react/legacy.html"><strong aria-hidden="true">13.</strong> Legacy React APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/Children.html"><strong aria-hidden="true">13.1.</strong> Children</a></li><li class="chapter-item expanded "><a href="../../reference/react/cloneElement.html"><strong aria-hidden="true">13.2.</strong> cloneElement</a></li><li class="chapter-item expanded "><a href="../../reference/react/Component.html"><strong aria-hidden="true">13.3.</strong> Component</a></li><li class="chapter-item expanded "><a href="../../reference/react/createElement.html"><strong aria-hidden="true">13.4.</strong> createElement</a></li><li class="chapter-item expanded "><a href="../../reference/react/createFactory.html"><strong aria-hidden="true">13.5.</strong> createFactory</a></li><li class="chapter-item expanded "><a href="../../reference/react/createRef.html"><strong aria-hidden="true">13.6.</strong> createRef</a></li><li class="chapter-item expanded "><a href="../../reference/react/isValidElement.html"><strong aria-hidden="true">13.7.</strong> isValidElement</a></li><li class="chapter-item expanded "><a href="../../reference/react/PureComponent.html"><strong aria-hidden="true">13.8.</strong> PureComponent</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">React 18 Docs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<h2 id="title-usetransition"><a class="header" href="#title-usetransition">title: useTransition</a></h2>
<Intro>
<p><code>useTransition</code> is a React Hook that lets you update the state without blocking the UI.</p>
<pre><code class="language-js">const [isPending, startTransition] = useTransition()
</code></pre>
</Intro>
<InlineToc />
<hr />
<h2 id="reference-reference"><a class="header" href="#reference-reference">Reference {/<em>reference</em>/}</a></h2>
<h3 id="usetransition-usetransition"><a class="header" href="#usetransition-usetransition"><code>useTransition()</code> {/<em>usetransition</em>/}</a></h3>
<p>Call <code>useTransition</code> at the top level of your component to mark some state updates as transitions.</p>
<pre><code class="language-js">import { useTransition } from 'react';

function TabContainer() {
  const [isPending, startTransition] = useTransition();
  // ...
}
</code></pre>
<p><a href="/#usage">See more examples below.</a></p>
<h4 id="parameters-parameters"><a class="header" href="#parameters-parameters">Parameters {/<em>parameters</em>/}</a></h4>
<p><code>useTransition</code> does not take any parameters.</p>
<h4 id="returns-returns"><a class="header" href="#returns-returns">Returns {/<em>returns</em>/}</a></h4>
<p><code>useTransition</code> returns an array with exactly two items:</p>
<ol>
<li>The <code>isPending</code> flag that tells you whether there is a pending transition.</li>
<li>The <a href="#starttransition"><code>startTransition</code> function</a> that lets you mark a state update as a transition.</li>
</ol>
<hr />
<h3 id="starttransition-function-starttransition"><a class="header" href="#starttransition-function-starttransition"><code>startTransition</code> function {/<em>starttransition</em>/}</a></h3>
<p>The <code>startTransition</code> function returned by <code>useTransition</code> lets you mark a state update as a transition.</p>
<pre><code class="language-js {6 8}">function TabContainer() {
  const [isPending, startTransition] = useTransition();
  const [tab, setTab] = useState('about');

  function selectTab(nextTab) {
    startTransition(() =&gt; {
      setTab(nextTab);
    });
  }
  // ...
}
</code></pre>
<h4 id="parameters-starttransition-parameters"><a class="header" href="#parameters-starttransition-parameters">Parameters {/<em>starttransition-parameters</em>/}</a></h4>
<ul>
<li><code>scope</code>: A function that updates some state by calling one or more <a href="/reference/react/useState#setstate"><code>set</code> functions.</a> React immediately calls <code>scope</code> with no parameters and marks all state updates scheduled synchronously during the <code>scope</code> function call as transitions. They will be <a href="#marking-a-state-update-as-a-non-blocking-transition">non-blocking</a> and <a href="#preventing-unwanted-loading-indicators">will not display unwanted loading indicators.</a></li>
</ul>
<h4 id="returns-starttransition-returns"><a class="header" href="#returns-starttransition-returns">Returns {/<em>starttransition-returns</em>/}</a></h4>
<p><code>startTransition</code> does not return anything.</p>
<h4 id="caveats-starttransition-caveats"><a class="header" href="#caveats-starttransition-caveats">Caveats {/<em>starttransition-caveats</em>/}</a></h4>
<ul>
<li>
<p><code>useTransition</code> is a Hook, so it can only be called inside components or custom Hooks. If you need to start a transition somewhere else (for example, from a data library), call the standalone <a href="/reference/react/startTransition"><code>startTransition</code></a> instead.</p>
</li>
<li>
<p>You can wrap an update into a transition only if you have access to the <code>set</code> function of that state. If you want to start a transition in response to some prop or a custom Hook return value, try <a href="/reference/react/useDeferredValue"><code>useDeferredValue</code></a> instead.</p>
</li>
<li>
<p>The function you pass to <code>startTransition</code> must be synchronous. React immediately executes this function, marking all state updates that happen while it executes as transitions. If you try to perform more state updates later (for example, in a timeout), they won't be marked as transitions.</p>
</li>
<li>
<p>A state update marked as a transition will be interrupted by other state updates. For example, if you update a chart component inside a transition, but then start typing into an input while the chart is in the middle of a re-render, React will restart the rendering work on the chart component after handling the input state update.</p>
</li>
<li>
<p>Transition updates can't be used to control text inputs.</p>
</li>
<li>
<p>If there are multiple ongoing transitions, React currently batches them together. This is a limitation that will likely be removed in a future release.</p>
</li>
</ul>
<hr />
<h2 id="usage-usage"><a class="header" href="#usage-usage">Usage {/<em>usage</em>/}</a></h2>
<h3 id="marking-a-state-update-as-a-non-blocking-transition-marking-a-state-update-as-a-non-blocking-transition"><a class="header" href="#marking-a-state-update-as-a-non-blocking-transition-marking-a-state-update-as-a-non-blocking-transition">Marking a state update as a non-blocking transition {/<em>marking-a-state-update-as-a-non-blocking-transition</em>/}</a></h3>
<p>Call <code>useTransition</code> at the top level of your component to mark some state updates as non-blocking <em>transitions</em>.</p>
<pre><code class="language-js [[1  4  &quot;isPending&quot;]  [2  4  &quot;startTransition&quot;]]">import { useState, useTransition } from 'react';

function TabContainer() {
  const [isPending, startTransition] = useTransition();
  // ...
}
</code></pre>
<p><code>useTransition</code> returns an array with exactly two items:</p>
<ol>
<li>The <CodeStep step={1}><code>isPending</code> flag</CodeStep> that tells you whether there is a pending transition.</li>
<li>The <CodeStep step={2}><code>startTransition</code> function</CodeStep> that lets you mark a state update as a transition.</li>
</ol>
<p>You can then mark a state update as a transition like this:</p>
<pre><code class="language-js {6 8}">function TabContainer() {
  const [isPending, startTransition] = useTransition();
  const [tab, setTab] = useState('about');

  function selectTab(nextTab) {
    startTransition(() =&gt; {
      setTab(nextTab);
    });
  }
  // ...
}
</code></pre>
<p>Transitions let you keep the user interface updates responsive even on slow devices.</p>
<p>With a transition, your UI stays responsive in the middle of a re-render. For example, if the user clicks a tab but then change their mind and click another tab, they can do that without waiting for the first re-render to finish.</p>
<Recipes titleText="The difference between useTransition and regular state updates" titleId="examples">
<h4 id="updating-the-current-tab-in-a-transition-updating-the-current-tab-in-a-transition"><a class="header" href="#updating-the-current-tab-in-a-transition-updating-the-current-tab-in-a-transition">Updating the current tab in a transition {/<em>updating-the-current-tab-in-a-transition</em>/}</a></h4>
<p>In this example, the &quot;Posts&quot; tab is <strong>artificially slowed down</strong> so that it takes at least a second to render.</p>
<p>Click &quot;Posts&quot; and then immediately click &quot;Contact&quot;. Notice that this interrupts the slow render of &quot;Posts&quot;. The &quot;Contact&quot; tab shows immediately. Because this state update is marked as a transition, a slow re-render did not freeze the user interface.</p>
<Sandpack>
<pre><code class="language-js">import { useState, useTransition } from 'react';
import TabButton from './TabButton.js';
import AboutTab from './AboutTab.js';
import PostsTab from './PostsTab.js';
import ContactTab from './ContactTab.js';

export default function TabContainer() {
  const [isPending, startTransition] = useTransition();
  const [tab, setTab] = useState('about');

  function selectTab(nextTab) {
    startTransition(() =&gt; {
      setTab(nextTab);      
    });
  }

  return (
    &lt;&gt;
      &lt;TabButton
        isActive={tab === 'about'}
        onClick={() =&gt; selectTab('about')}
      &gt;
        About
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'posts'}
        onClick={() =&gt; selectTab('posts')}
      &gt;
        Posts (slow)
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'contact'}
        onClick={() =&gt; selectTab('contact')}
      &gt;
        Contact
      &lt;/TabButton&gt;
      &lt;hr /&gt;
      {tab === 'about' &amp;&amp; &lt;AboutTab /&gt;}
      {tab === 'posts' &amp;&amp; &lt;PostsTab /&gt;}
      {tab === 'contact' &amp;&amp; &lt;ContactTab /&gt;}
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js TabButton.js">import { useTransition } from 'react';

export default function TabButton({ children, isActive, onClick }) {
  if (isActive) {
    return &lt;b&gt;{children}&lt;/b&gt;
  }
  return (
    &lt;button onClick={() =&gt; {
      onClick();
    }}&gt;
      {children}
    &lt;/button&gt;
  )
}

</code></pre>
<pre><code class="language-js AboutTab.js">export default function AboutTab() {
  return (
    &lt;p&gt;Welcome to my profile!&lt;/p&gt;
  );
}
</code></pre>
<pre><code class="language-js PostsTab.js">import { memo } from 'react';

const PostsTab = memo(function PostsTab() {
  // Log once. The actual slowdown is inside SlowPost.
  console.log('[ARTIFICIALLY SLOW] Rendering 500 &lt;SlowPost /&gt;');

  let items = [];
  for (let i = 0; i &lt; 500; i++) {
    items.push(&lt;SlowPost key={i} index={i} /&gt;);
  }
  return (
    &lt;ul className=&quot;items&quot;&gt;
      {items}
    &lt;/ul&gt;
  );
});

function SlowPost({ index }) {
  let startTime = performance.now();
  while (performance.now() - startTime &lt; 1) {
    // Do nothing for 1 ms per item to emulate extremely slow code
  }

  return (
    &lt;li className=&quot;item&quot;&gt;
      Post #{index + 1}
    &lt;/li&gt;
  );
}

export default PostsTab;
</code></pre>
<pre><code class="language-js ContactTab.js">export default function ContactTab() {
  return (
    &lt;&gt;
      &lt;p&gt;
        You can find me online here:
      &lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;admin@mysite.com&lt;/li&gt;
        &lt;li&gt;+123456789&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-css">button { margin-right: 10px }
b { display: inline-block; margin-right: 10px; }
</code></pre>
</Sandpack>
<Solution />
<h4 id="updating-the-current-tab-without-a-transition-updating-the-current-tab-without-a-transition"><a class="header" href="#updating-the-current-tab-without-a-transition-updating-the-current-tab-without-a-transition">Updating the current tab without a transition {/<em>updating-the-current-tab-without-a-transition</em>/}</a></h4>
<p>In this example, the &quot;Posts&quot; tab is also <strong>artificially slowed down</strong> so that it takes at least a second to render. Unlike in the previous example, this state update is <strong>not a transition.</strong></p>
<p>Click &quot;Posts&quot; and then immediately click &quot;Contact&quot;. Notice that the app freezes while rendering the slowed down tab, and the UI becomes unresponsive. This state update is not a transition, so a slow re-render freezed the user interface.</p>
<Sandpack>
<pre><code class="language-js">import { useState } from 'react';
import TabButton from './TabButton.js';
import AboutTab from './AboutTab.js';
import PostsTab from './PostsTab.js';
import ContactTab from './ContactTab.js';

export default function TabContainer() {
  const [tab, setTab] = useState('about');

  function selectTab(nextTab) {
    setTab(nextTab);
  }

  return (
    &lt;&gt;
      &lt;TabButton
        isActive={tab === 'about'}
        onClick={() =&gt; selectTab('about')}
      &gt;
        About
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'posts'}
        onClick={() =&gt; selectTab('posts')}
      &gt;
        Posts (slow)
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'contact'}
        onClick={() =&gt; selectTab('contact')}
      &gt;
        Contact
      &lt;/TabButton&gt;
      &lt;hr /&gt;
      {tab === 'about' &amp;&amp; &lt;AboutTab /&gt;}
      {tab === 'posts' &amp;&amp; &lt;PostsTab /&gt;}
      {tab === 'contact' &amp;&amp; &lt;ContactTab /&gt;}
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js TabButton.js">import { useTransition } from 'react';

export default function TabButton({ children, isActive, onClick }) {
  if (isActive) {
    return &lt;b&gt;{children}&lt;/b&gt;
  }
  return (
    &lt;button onClick={() =&gt; {
      onClick();
    }}&gt;
      {children}
    &lt;/button&gt;
  )
}

</code></pre>
<pre><code class="language-js AboutTab.js">export default function AboutTab() {
  return (
    &lt;p&gt;Welcome to my profile!&lt;/p&gt;
  );
}
</code></pre>
<pre><code class="language-js PostsTab.js">import { memo } from 'react';

const PostsTab = memo(function PostsTab() {
  // Log once. The actual slowdown is inside SlowPost.
  console.log('[ARTIFICIALLY SLOW] Rendering 500 &lt;SlowPost /&gt;');

  let items = [];
  for (let i = 0; i &lt; 500; i++) {
    items.push(&lt;SlowPost key={i} index={i} /&gt;);
  }
  return (
    &lt;ul className=&quot;items&quot;&gt;
      {items}
    &lt;/ul&gt;
  );
});

function SlowPost({ index }) {
  let startTime = performance.now();
  while (performance.now() - startTime &lt; 1) {
    // Do nothing for 1 ms per item to emulate extremely slow code
  }

  return (
    &lt;li className=&quot;item&quot;&gt;
      Post #{index + 1}
    &lt;/li&gt;
  );
}

export default PostsTab;
</code></pre>
<pre><code class="language-js ContactTab.js">export default function ContactTab() {
  return (
    &lt;&gt;
      &lt;p&gt;
        You can find me online here:
      &lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;admin@mysite.com&lt;/li&gt;
        &lt;li&gt;+123456789&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-css">button { margin-right: 10px }
b { display: inline-block; margin-right: 10px; }
</code></pre>
</Sandpack>
<Solution />
</Recipes>
<hr />
<h3 id="updating-the-parent-component-in-a-transition-updating-the-parent-component-in-a-transition"><a class="header" href="#updating-the-parent-component-in-a-transition-updating-the-parent-component-in-a-transition">Updating the parent component in a transition {/<em>updating-the-parent-component-in-a-transition</em>/}</a></h3>
<p>The <code>useTransition</code> call does not have to be in the same component whose state you're updating. You can also move it into a child component. For example, this <code>TabButton</code> component wraps its <code>onClick</code> logic in a transition:</p>
<pre><code class="language-js {8-10}">export default function TabButton({ children, isActive, onClick }) {
  const [isPending, startTransition] = useTransition();
  if (isActive) {
    return &lt;b&gt;{children}&lt;/b&gt;
  }
  return (
    &lt;button onClick={() =&gt; {
      startTransition(() =&gt; {
        onClick();
      });
    }}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<p>Because the parent component updates its state inside the <code>onClick</code> event handler, that state update gets marked as a transition. This is why, like in the earlier example, you can click on &quot;Posts&quot; and then immediately click &quot;Contact&quot;. Updating the selected tab is marked as a transition, so it does not block further user interactions.</p>
<Sandpack>
<pre><code class="language-js">import { useState } from 'react';
import TabButton from './TabButton.js';
import AboutTab from './AboutTab.js';
import PostsTab from './PostsTab.js';
import ContactTab from './ContactTab.js';

export default function TabContainer() {
  const [tab, setTab] = useState('about');
  return (
    &lt;&gt;
      &lt;TabButton
        isActive={tab === 'about'}
        onClick={() =&gt; setTab('about')}
      &gt;
        About
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'posts'}
        onClick={() =&gt; setTab('posts')}
      &gt;
        Posts (slow)
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'contact'}
        onClick={() =&gt; setTab('contact')}
      &gt;
        Contact
      &lt;/TabButton&gt;
      &lt;hr /&gt;
      {tab === 'about' &amp;&amp; &lt;AboutTab /&gt;}
      {tab === 'posts' &amp;&amp; &lt;PostsTab /&gt;}
      {tab === 'contact' &amp;&amp; &lt;ContactTab /&gt;}
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js TabButton.js active">import { useTransition } from 'react';

export default function TabButton({ children, isActive, onClick }) {
  const [isPending, startTransition] = useTransition();
  if (isActive) {
    return &lt;b&gt;{children}&lt;/b&gt;
  }
  return (
    &lt;button onClick={() =&gt; {
      startTransition(() =&gt; {
        onClick();
      });
    }}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-js AboutTab.js">export default function AboutTab() {
  return (
    &lt;p&gt;Welcome to my profile!&lt;/p&gt;
  );
}
</code></pre>
<pre><code class="language-js PostsTab.js">import { memo } from 'react';

const PostsTab = memo(function PostsTab() {
  // Log once. The actual slowdown is inside SlowPost.
  console.log('[ARTIFICIALLY SLOW] Rendering 500 &lt;SlowPost /&gt;');

  let items = [];
  for (let i = 0; i &lt; 500; i++) {
    items.push(&lt;SlowPost key={i} index={i} /&gt;);
  }
  return (
    &lt;ul className=&quot;items&quot;&gt;
      {items}
    &lt;/ul&gt;
  );
});

function SlowPost({ index }) {
  let startTime = performance.now();
  while (performance.now() - startTime &lt; 1) {
    // Do nothing for 1 ms per item to emulate extremely slow code
  }

  return (
    &lt;li className=&quot;item&quot;&gt;
      Post #{index + 1}
    &lt;/li&gt;
  );
}

export default PostsTab;
</code></pre>
<pre><code class="language-js ContactTab.js">export default function ContactTab() {
  return (
    &lt;&gt;
      &lt;p&gt;
        You can find me online here:
      &lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;admin@mysite.com&lt;/li&gt;
        &lt;li&gt;+123456789&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-css">button { margin-right: 10px }
b { display: inline-block; margin-right: 10px; }
</code></pre>
</Sandpack>
<hr />
<h3 id="displaying-a-pending-visual-state-during-the-transition-displaying-a-pending-visual-state-during-the-transition"><a class="header" href="#displaying-a-pending-visual-state-during-the-transition-displaying-a-pending-visual-state-during-the-transition">Displaying a pending visual state during the transition {/<em>displaying-a-pending-visual-state-during-the-transition</em>/}</a></h3>
<p>You can use the <code>isPending</code> boolean value returned by <code>useTransition</code> to indicate to the user that a transition is in progress. For example, the tab button can have a special &quot;pending&quot; visual state:</p>
<pre><code class="language-js {4-6}">function TabButton({ children, isActive, onClick }) {
  const [isPending, startTransition] = useTransition();
  // ...
  if (isPending) {
    return &lt;b className=&quot;pending&quot;&gt;{children}&lt;/b&gt;;
  }
  // ...
</code></pre>
<p>Notice how clicking &quot;Posts&quot; now feels more responsive because the tab button itself updates right away:</p>
<Sandpack>
<pre><code class="language-js">import { useState } from 'react';
import TabButton from './TabButton.js';
import AboutTab from './AboutTab.js';
import PostsTab from './PostsTab.js';
import ContactTab from './ContactTab.js';

export default function TabContainer() {
  const [tab, setTab] = useState('about');
  return (
    &lt;&gt;
      &lt;TabButton
        isActive={tab === 'about'}
        onClick={() =&gt; setTab('about')}
      &gt;
        About
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'posts'}
        onClick={() =&gt; setTab('posts')}
      &gt;
        Posts (slow)
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'contact'}
        onClick={() =&gt; setTab('contact')}
      &gt;
        Contact
      &lt;/TabButton&gt;
      &lt;hr /&gt;
      {tab === 'about' &amp;&amp; &lt;AboutTab /&gt;}
      {tab === 'posts' &amp;&amp; &lt;PostsTab /&gt;}
      {tab === 'contact' &amp;&amp; &lt;ContactTab /&gt;}
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js TabButton.js active">import { useTransition } from 'react';

export default function TabButton({ children, isActive, onClick }) {
  const [isPending, startTransition] = useTransition();
  if (isActive) {
    return &lt;b&gt;{children}&lt;/b&gt;
  }
  if (isPending) {
    return &lt;b className=&quot;pending&quot;&gt;{children}&lt;/b&gt;;
  }
  return (
    &lt;button onClick={() =&gt; {
      startTransition(() =&gt; {
        onClick();
      });
    }}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-js AboutTab.js">export default function AboutTab() {
  return (
    &lt;p&gt;Welcome to my profile!&lt;/p&gt;
  );
}
</code></pre>
<pre><code class="language-js PostsTab.js">import { memo } from 'react';

const PostsTab = memo(function PostsTab() {
  // Log once. The actual slowdown is inside SlowPost.
  console.log('[ARTIFICIALLY SLOW] Rendering 500 &lt;SlowPost /&gt;');

  let items = [];
  for (let i = 0; i &lt; 500; i++) {
    items.push(&lt;SlowPost key={i} index={i} /&gt;);
  }
  return (
    &lt;ul className=&quot;items&quot;&gt;
      {items}
    &lt;/ul&gt;
  );
});

function SlowPost({ index }) {
  let startTime = performance.now();
  while (performance.now() - startTime &lt; 1) {
    // Do nothing for 1 ms per item to emulate extremely slow code
  }

  return (
    &lt;li className=&quot;item&quot;&gt;
      Post #{index + 1}
    &lt;/li&gt;
  );
}

export default PostsTab;
</code></pre>
<pre><code class="language-js ContactTab.js">export default function ContactTab() {
  return (
    &lt;&gt;
      &lt;p&gt;
        You can find me online here:
      &lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;admin@mysite.com&lt;/li&gt;
        &lt;li&gt;+123456789&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-css">button { margin-right: 10px }
b { display: inline-block; margin-right: 10px; }
.pending { color: #777; }
</code></pre>
</Sandpack>
<hr />
<h3 id="preventing-unwanted-loading-indicators-preventing-unwanted-loading-indicators"><a class="header" href="#preventing-unwanted-loading-indicators-preventing-unwanted-loading-indicators">Preventing unwanted loading indicators {/<em>preventing-unwanted-loading-indicators</em>/}</a></h3>
<p>In this example, the <code>PostsTab</code> component fetches some data using a <a href="/reference/react/Suspense">Suspense-enabled</a> data source. When you click the &quot;Posts&quot; tab, the <code>PostsTab</code> component <em>suspends</em>, causing the closest loading fallback to be displayed:</p>
<Sandpack>
<pre><code class="language-js">import { Suspense, useState } from 'react';
import TabButton from './TabButton.js';
import AboutTab from './AboutTab.js';
import PostsTab from './PostsTab.js';
import ContactTab from './ContactTab.js';

export default function TabContainer() {
  const [tab, setTab] = useState('about');
  return (
    &lt;Suspense fallback={&lt;h1&gt;🌀 Loading...&lt;/h1&gt;}&gt;
      &lt;TabButton
        isActive={tab === 'about'}
        onClick={() =&gt; setTab('about')}
      &gt;
        About
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'posts'}
        onClick={() =&gt; setTab('posts')}
      &gt;
        Posts
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'contact'}
        onClick={() =&gt; setTab('contact')}
      &gt;
        Contact
      &lt;/TabButton&gt;
      &lt;hr /&gt;
      {tab === 'about' &amp;&amp; &lt;AboutTab /&gt;}
      {tab === 'posts' &amp;&amp; &lt;PostsTab /&gt;}
      {tab === 'contact' &amp;&amp; &lt;ContactTab /&gt;}
    &lt;/Suspense&gt;
  );
}
</code></pre>
<pre><code class="language-js TabButton.js">export default function TabButton({ children, isActive, onClick }) {
  if (isActive) {
    return &lt;b&gt;{children}&lt;/b&gt;
  }
  return (
    &lt;button onClick={() =&gt; {
      onClick();
    }}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-js AboutTab.js hidden">export default function AboutTab() {
  return (
    &lt;p&gt;Welcome to my profile!&lt;/p&gt;
  );
}
</code></pre>
<pre><code class="language-js PostsTab.js hidden">import { fetchData } from './data.js';

// Note: this component is written using an experimental API
// that's not yet available in stable versions of React.

// For a realistic example you can follow today, try a framework
// that's integrated with Suspense, like Relay or Next.js.

function PostsTab() {
  const posts = use(fetchData('/posts'));
  return (
    &lt;ul className=&quot;items&quot;&gt;
      {posts.map(post =&gt;
        &lt;Post key={post.id} title={post.title} /&gt;
      )}
    &lt;/ul&gt;
  );
}

function Post({ title }) {
  return (
    &lt;li className=&quot;item&quot;&gt;
      {title}
    &lt;/li&gt;
  );
}

export default PostsTab;

// This is a workaround for a bug to get the demo running.
// TODO: replace with real implementation when the bug is fixed.
function use(promise) {
  if (promise.status === 'fulfilled') {
    return promise.value;
  } else if (promise.status === 'rejected') {
    throw promise.reason;
  } else if (promise.status === 'pending') {
    throw promise;
  } else {
    promise.status = 'pending';
    promise.then(
      result =&gt; {
        promise.status = 'fulfilled';
        promise.value = result;
      },
      reason =&gt; {
        promise.status = 'rejected';
        promise.reason = reason;
      },      
    );
    throw promise;
  }
}
</code></pre>
<pre><code class="language-js ContactTab.js hidden">export default function ContactTab() {
  return (
    &lt;&gt;
      &lt;p&gt;
        You can find me online here:
      &lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;admin@mysite.com&lt;/li&gt;
        &lt;li&gt;+123456789&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js data.js hidden">// Note: the way you would do data fething depends on
// the framework that you use together with Suspense.
// Normally, the caching logic would be inside a framework.

let cache = new Map();

export function fetchData(url) {
  if (!cache.has(url)) {
    cache.set(url, getData(url));
  }
  return cache.get(url);
}

async function getData(url) {
  if (url.startsWith('/posts')) {
    return await getPosts();
  } else {
    throw Error('Not implemented');
  }
}

async function getPosts() {
  // Add a fake delay to make waiting noticeable.
  await new Promise(resolve =&gt; {
    setTimeout(resolve, 1000);
  });
  let posts = [];
  for (let i = 0; i &lt; 500; i++) {
    posts.push({
      id: i,
      title: 'Post #' + (i + 1)
    });
  }
  return posts;
}
</code></pre>
<pre><code class="language-css">button { margin-right: 10px }
b { display: inline-block; margin-right: 10px; }
.pending { color: #777; }
</code></pre>
</Sandpack>
<p>Hiding the entire tab container to show a loading indicator leads to a jarring user experience. If you add <code>useTransition</code> to <code>TabButton</code>, you can instead indicate display the pending state in the tab button instead.</p>
<p>Notice that clicking &quot;Posts&quot; no longer replaces the entire tab container with a spinner:</p>
<Sandpack>
<pre><code class="language-js">import { Suspense, useState } from 'react';
import TabButton from './TabButton.js';
import AboutTab from './AboutTab.js';
import PostsTab from './PostsTab.js';
import ContactTab from './ContactTab.js';

export default function TabContainer() {
  const [tab, setTab] = useState('about');
  return (
    &lt;Suspense fallback={&lt;h1&gt;🌀 Loading...&lt;/h1&gt;}&gt;
      &lt;TabButton
        isActive={tab === 'about'}
        onClick={() =&gt; setTab('about')}
      &gt;
        About
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'posts'}
        onClick={() =&gt; setTab('posts')}
      &gt;
        Posts
      &lt;/TabButton&gt;
      &lt;TabButton
        isActive={tab === 'contact'}
        onClick={() =&gt; setTab('contact')}
      &gt;
        Contact
      &lt;/TabButton&gt;
      &lt;hr /&gt;
      {tab === 'about' &amp;&amp; &lt;AboutTab /&gt;}
      {tab === 'posts' &amp;&amp; &lt;PostsTab /&gt;}
      {tab === 'contact' &amp;&amp; &lt;ContactTab /&gt;}
    &lt;/Suspense&gt;
  );
}
</code></pre>
<pre><code class="language-js TabButton.js active">import { useTransition } from 'react';

export default function TabButton({ children, isActive, onClick }) {
  const [isPending, startTransition] = useTransition();
  if (isActive) {
    return &lt;b&gt;{children}&lt;/b&gt;
  }
  if (isPending) {
    return &lt;b className=&quot;pending&quot;&gt;{children}&lt;/b&gt;;
  }
  return (
    &lt;button onClick={() =&gt; {
      startTransition(() =&gt; {
        onClick();
      });
    }}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-js AboutTab.js hidden">export default function AboutTab() {
  return (
    &lt;p&gt;Welcome to my profile!&lt;/p&gt;
  );
}
</code></pre>
<pre><code class="language-js PostsTab.js hidden">import { fetchData } from './data.js';

// Note: this component is written using an experimental API
// that's not yet available in stable versions of React.

// For a realistic example you can follow today, try a framework
// that's integrated with Suspense, like Relay or Next.js.

function PostsTab() {
  const posts = use(fetchData('/posts'));
  return (
    &lt;ul className=&quot;items&quot;&gt;
      {posts.map(post =&gt;
        &lt;Post key={post.id} title={post.title} /&gt;
      )}
    &lt;/ul&gt;
  );
}

function Post({ title }) {
  return (
    &lt;li className=&quot;item&quot;&gt;
      {title}
    &lt;/li&gt;
  );
}

export default PostsTab;

// This is a workaround for a bug to get the demo running.
// TODO: replace with real implementation when the bug is fixed.
function use(promise) {
  if (promise.status === 'fulfilled') {
    return promise.value;
  } else if (promise.status === 'rejected') {
    throw promise.reason;
  } else if (promise.status === 'pending') {
    throw promise;
  } else {
    promise.status = 'pending';
    promise.then(
      result =&gt; {
        promise.status = 'fulfilled';
        promise.value = result;
      },
      reason =&gt; {
        promise.status = 'rejected';
        promise.reason = reason;
      },      
    );
    throw promise;
  }
}
</code></pre>
<pre><code class="language-js ContactTab.js hidden">export default function ContactTab() {
  return (
    &lt;&gt;
      &lt;p&gt;
        You can find me online here:
      &lt;/p&gt;
      &lt;ul&gt;
        &lt;li&gt;admin@mysite.com&lt;/li&gt;
        &lt;li&gt;+123456789&lt;/li&gt;
      &lt;/ul&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js data.js hidden">// Note: the way you would do data fething depends on
// the framework that you use together with Suspense.
// Normally, the caching logic would be inside a framework.

let cache = new Map();

export function fetchData(url) {
  if (!cache.has(url)) {
    cache.set(url, getData(url));
  }
  return cache.get(url);
}

async function getData(url) {
  if (url.startsWith('/posts')) {
    return await getPosts();
  } else {
    throw Error('Not implemented');
  }
}

async function getPosts() {
  // Add a fake delay to make waiting noticeable.
  await new Promise(resolve =&gt; {
    setTimeout(resolve, 1000);
  });
  let posts = [];
  for (let i = 0; i &lt; 500; i++) {
    posts.push({
      id: i,
      title: 'Post #' + (i + 1)
    });
  }
  return posts;
}
</code></pre>
<pre><code class="language-css">button { margin-right: 10px }
b { display: inline-block; margin-right: 10px; }
.pending { color: #777; }
</code></pre>
</Sandpack>
<p><a href="/reference/react/Suspense#preventing-already-revealed-content-from-hiding">Read more about using transitions with Suspense.</a></p>
<Note>
<p>Transitions will only &quot;wait&quot; long enough to avoid hiding <em>already revealed</em> content (like the tab container). For example, if the Posts tab had a <a href="/reference/react/Suspense#revealing-nested-content-as-it-loads">nested <code>&lt;Suspense&gt;</code> boundary,</a> the transition would not &quot;wait&quot; for it.</p>
</Note>
<hr />
<h3 id="building-a-suspense-enabled-router-building-a-suspense-enabled-router"><a class="header" href="#building-a-suspense-enabled-router-building-a-suspense-enabled-router">Building a Suspense-enabled router {/<em>building-a-suspense-enabled-router</em>/}</a></h3>
<p>If you're building your own React framework or a router, we recommend to mark page navigations as transitions.</p>
<pre><code class="language-js {3 6 8}">function Router() {
  const [page, setPage] = useState('/');
  const [isPending, startTransition] = useTransition();

  function navigate(url) {
    startTransition(() =&gt; {
      setPage(url);
    });
  }
  // ...
</code></pre>
<p>This is recommended for two reasons:</p>
<ul>
<li><a href="#marking-a-state-update-as-a-non-blocking-transition">Transitions are interruptible,</a> which lets the user click away without waiting for the re-render to complete.</li>
<li><a href="#preventing-unwanted-loading-indicators">Transitions prevent unwanted loading indicators,</a> which lets the user avoid jarring jumps on navigation.</li>
</ul>
<p>Here is a tiny simplified router example using transitions for navigations.</p>
<Sandpack>
<pre><code class="language-json package.json hidden">{
  &quot;dependencies&quot;: {
    &quot;react&quot;: &quot;experimental&quot;,
    &quot;react-dom&quot;: &quot;experimental&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;react-scripts start&quot;,
    &quot;build&quot;: &quot;react-scripts build&quot;,
    &quot;test&quot;: &quot;react-scripts test --env=jsdom&quot;,
    &quot;eject&quot;: &quot;react-scripts eject&quot;
  }
}
</code></pre>
<pre><code class="language-js App.js">import { Suspense, useState, useTransition } from 'react';
import IndexPage from './IndexPage.js';
import ArtistPage from './ArtistPage.js';
import Layout from './Layout.js';

export default function App() {
  return (
    &lt;Suspense fallback={&lt;BigSpinner /&gt;}&gt;
      &lt;Router /&gt;
    &lt;/Suspense&gt;
  );
}

function Router() {
  const [page, setPage] = useState('/');
  const [isPending, startTransition] = useTransition();

  function navigate(url) {
    startTransition(() =&gt; {
      setPage(url);
    });
  }

  let content;
  if (page === '/') {
    content = (
      &lt;IndexPage navigate={navigate} /&gt;
    );
  } else if (page === '/the-beatles') {
    content = (
      &lt;ArtistPage
        artist={{
          id: 'the-beatles',
          name: 'The Beatles',
        }}
      /&gt;
    );
  }
  return (
    &lt;Layout isPending={isPending}&gt;
      {content}
    &lt;/Layout&gt;
  );
}

function BigSpinner() {
  return &lt;h2&gt;🌀 Loading...&lt;/h2&gt;;
}
</code></pre>
<pre><code class="language-js Layout.js">export default function Layout({ children, isPending }) {
  return (
    &lt;div className=&quot;layout&quot;&gt;
      &lt;section className=&quot;header&quot; style={{
        opacity: isPending ? 0.7 : 1
      }}&gt;
        Music Browser
      &lt;/section&gt;
      &lt;main&gt;
        {children}
      &lt;/main&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<pre><code class="language-js IndexPage.js">export default function IndexPage({ navigate }) {
  return (
    &lt;button onClick={() =&gt; navigate('/the-beatles')}&gt;
      Open The Beatles artist page
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-js ArtistPage.js">import { Suspense } from 'react';
import Albums from './Albums.js';
import Biography from './Biography.js';
import Panel from './Panel.js';

export default function ArtistPage({ artist }) {
  return (
    &lt;&gt;
      &lt;h1&gt;{artist.name}&lt;/h1&gt;
      &lt;Biography artistId={artist.id} /&gt;
      &lt;Suspense fallback={&lt;AlbumsGlimmer /&gt;}&gt;
        &lt;Panel&gt;
          &lt;Albums artistId={artist.id} /&gt;
        &lt;/Panel&gt;
      &lt;/Suspense&gt;
    &lt;/&gt;
  );
}

function AlbumsGlimmer() {
  return (
    &lt;div className=&quot;glimmer-panel&quot;&gt;
      &lt;div className=&quot;glimmer-line&quot; /&gt;
      &lt;div className=&quot;glimmer-line&quot; /&gt;
      &lt;div className=&quot;glimmer-line&quot; /&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<pre><code class="language-js Albums.js hidden">import { fetchData } from './data.js';

// Note: this component is written using an experimental API
// that's not yet available in stable versions of React.

// For a realistic example you can follow today, try a framework
// that's integrated with Suspense, like Relay or Next.js.

export default function Albums({ artistId }) {
  const albums = use(fetchData(`/${artistId}/albums`));
  return (
    &lt;ul&gt;
      {albums.map(album =&gt; (
        &lt;li key={album.id}&gt;
          {album.title} ({album.year})
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}

// This is a workaround for a bug to get the demo running.
// TODO: replace with real implementation when the bug is fixed.
function use(promise) {
  if (promise.status === 'fulfilled') {
    return promise.value;
  } else if (promise.status === 'rejected') {
    throw promise.reason;
  } else if (promise.status === 'pending') {
    throw promise;
  } else {
    promise.status = 'pending';
    promise.then(
      result =&gt; {
        promise.status = 'fulfilled';
        promise.value = result;
      },
      reason =&gt; {
        promise.status = 'rejected';
        promise.reason = reason;
      },      
    );
    throw promise;
  }
}
</code></pre>
<pre><code class="language-js Biography.js hidden">import { fetchData } from './data.js';

// Note: this component is written using an experimental API
// that's not yet available in stable versions of React.

// For a realistic example you can follow today, try a framework
// that's integrated with Suspense, like Relay or Next.js.

export default function Biography({ artistId }) {
  const bio = use(fetchData(`/${artistId}/bio`));
  return (
    &lt;section&gt;
      &lt;p className=&quot;bio&quot;&gt;{bio}&lt;/p&gt;
    &lt;/section&gt;
  );
}

// This is a workaround for a bug to get the demo running.
// TODO: replace with real implementation when the bug is fixed.
function use(promise) {
  if (promise.status === 'fulfilled') {
    return promise.value;
  } else if (promise.status === 'rejected') {
    throw promise.reason;
  } else if (promise.status === 'pending') {
    throw promise;
  } else {
    promise.status = 'pending';
    promise.then(
      result =&gt; {
        promise.status = 'fulfilled';
        promise.value = result;
      },
      reason =&gt; {
        promise.status = 'rejected';
        promise.reason = reason;
      },      
    );
    throw promise;
  }
}
</code></pre>
<pre><code class="language-js Panel.js hidden">export default function Panel({ children }) {
  return (
    &lt;section className=&quot;panel&quot;&gt;
      {children}
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js data.js hidden">// Note: the way you would do data fething depends on
// the framework that you use together with Suspense.
// Normally, the caching logic would be inside a framework.

let cache = new Map();

export function fetchData(url) {
  if (!cache.has(url)) {
    cache.set(url, getData(url));
  }
  return cache.get(url);
}

async function getData(url) {
  if (url === '/the-beatles/albums') {
    return await getAlbums();
  } else if (url === '/the-beatles/bio') {
    return await getBio();
  } else {
    throw Error('Not implemented');
  }
}

async function getBio() {
  // Add a fake delay to make waiting noticeable.
  await new Promise(resolve =&gt; {
    setTimeout(resolve, 500);
  });

  return `The Beatles were an English rock band, 
    formed in Liverpool in 1960, that comprised 
    John Lennon, Paul McCartney, George Harrison 
    and Ringo Starr.`;
}

async function getAlbums() {
  // Add a fake delay to make waiting noticeable.
  await new Promise(resolve =&gt; {
    setTimeout(resolve, 3000);
  });

  return [{
    id: 13,
    title: 'Let It Be',
    year: 1970
  }, {
    id: 12,
    title: 'Abbey Road',
    year: 1969
  }, {
    id: 11,
    title: 'Yellow Submarine',
    year: 1969
  }, {
    id: 10,
    title: 'The Beatles',
    year: 1968
  }, {
    id: 9,
    title: 'Magical Mystery Tour',
    year: 1967
  }, {
    id: 8,
    title: 'Sgt. Pepper\'s Lonely Hearts Club Band',
    year: 1967
  }, {
    id: 7,
    title: 'Revolver',
    year: 1966
  }, {
    id: 6,
    title: 'Rubber Soul',
    year: 1965
  }, {
    id: 5,
    title: 'Help!',
    year: 1965
  }, {
    id: 4,
    title: 'Beatles For Sale',
    year: 1964
  }, {
    id: 3,
    title: 'A Hard Day\'s Night',
    year: 1964
  }, {
    id: 2,
    title: 'With The Beatles',
    year: 1963
  }, {
    id: 1,
    title: 'Please Please Me',
    year: 1963
  }];
}
</code></pre>
<pre><code class="language-css">main {
  min-height: 200px;
  padding: 10px;
}

.layout {
  border: 1px solid black;
}

.header {
  background: #222;
  padding: 10px;
  text-align: center;
  color: white;
}

.bio { font-style: italic; }

.panel {
  border: 1px solid #aaa;
  border-radius: 6px;
  margin-top: 20px;
  padding: 10px;
}

.glimmer-panel {
  border: 1px dashed #aaa;
  background: linear-gradient(90deg, rgba(221,221,221,1) 0%, rgba(255,255,255,1) 100%);
  border-radius: 6px;
  margin-top: 20px;
  padding: 10px;
}

.glimmer-line {
  display: block;
  width: 60%;
  height: 20px;
  margin: 10px;
  border-radius: 4px;
  background: #f0f0f0;
}
</code></pre>
</Sandpack>
<Note>
<p><a href="/reference/react/Suspense">Suspense-enabled</a> routers are expected to wrap the navigation updates into transitions by default.</p>
</Note>
<hr />
<h2 id="troubleshooting-troubleshooting"><a class="header" href="#troubleshooting-troubleshooting">Troubleshooting {/<em>troubleshooting</em>/}</a></h2>
<h3 id="updating-an-input-in-a-transition-doesnt-work-updating-an-input-in-a-transition-doesnt-work"><a class="header" href="#updating-an-input-in-a-transition-doesnt-work-updating-an-input-in-a-transition-doesnt-work">Updating an input in a transition doesn't work {/<em>updating-an-input-in-a-transition-doesnt-work</em>/}</a></h3>
<p>You can't use a transition for a state variable that controls an input:</p>
<pre><code class="language-js {4 10}">const [text, setText] = useState('');
// ...
function handleChange(e) {
  // ❌ Can't use transitions for controlled input state
  startTransition(() =&gt; {
    setText(e.target.value);
  });
}
// ...
return &lt;input value={text} onChange={handleChange} /&gt;;
</code></pre>
<p>This is because transitions are non-blocking, but updating an input in response to the change event should happen synchronously. If you want to run a transition in response to typing, you have two options:</p>
<ol>
<li>You can declare two separate state variables: one for the input state (which always updates synchronously), and one that you will update in a transition. This lets you control the input using the synchronous state, and pass the transition state variable (which will &quot;lag behind&quot; the input) to the rest of your rendering logic.</li>
<li>Alternatively, you can have one state variable, and add <a href="/reference/react/useDeferredValue"><code>useDeferredValue</code></a> which will &quot;lag behind&quot; the real value. It will trigger non-blocking re-renders to &quot;catch up&quot; with the new value automatically.</li>
</ol>
<hr />
<h3 id="react-doesnt-treat-my-state-update-as-a-transition-react-doesnt-treat-my-state-update-as-a-transition"><a class="header" href="#react-doesnt-treat-my-state-update-as-a-transition-react-doesnt-treat-my-state-update-as-a-transition">React doesn't treat my state update as a transition {/<em>react-doesnt-treat-my-state-update-as-a-transition</em>/}</a></h3>
<p>When you wrap a state update in a transition, make sure that it happens <em>during</em> the <code>startTransition</code> call:</p>
<pre><code class="language-js">startTransition(() =&gt; {
  // ✅ Setting state *during* startTransition call
  setPage('/about');
});
</code></pre>
<p>The function you pass to <code>startTransition</code> must be synchronous.</p>
<p>You can't mark an update as a transition like this:</p>
<pre><code class="language-js">startTransition(() =&gt; {
  // ❌ Setting state *after* startTransition call
  setTimeout(() =&gt; {
    setPage('/about');
  }, 1000);
});
</code></pre>
<p>Instead, you could do this:</p>
<pre><code class="language-js">setTimeout(() =&gt; {
  startTransition(() =&gt; {
    // ✅ Setting state *during* startTransition call
    setPage('/about');
  });
}, 1000);
</code></pre>
<p>Similarly, you can't mark an update as a transition like this:</p>
<pre><code class="language-js">startTransition(async () =&gt; {
  await someAsyncFunction();
  // ❌ Setting state *after* startTransition call
  setPage('/about');
});
</code></pre>
<p>However, this works instead:</p>
<pre><code class="language-js">await someAsyncFunction();
startTransition(() =&gt; {
  // ✅ Setting state *during* startTransition call
  setPage('/about');
});
</code></pre>
<hr />
<h3 id="i-want-to-call-usetransition-from-outside-a-component-i-want-to-call-usetransition-from-outside-a-component"><a class="header" href="#i-want-to-call-usetransition-from-outside-a-component-i-want-to-call-usetransition-from-outside-a-component">I want to call <code>useTransition</code> from outside a component {/<em>i-want-to-call-usetransition-from-outside-a-component</em>/}</a></h3>
<p>You can't call <code>useTransition</code> outside a component because it's a Hook. In this case, use the standalone <a href="/reference/react/startTransition"><code>startTransition</code></a> method instead. It works the same way, but it doesn't provide the <code>isPending</code> indicator.</p>
<hr />
<h3 id="the-function-i-pass-to-starttransition-executes-immediately-the-function-i-pass-to-starttransition-executes-immediately"><a class="header" href="#the-function-i-pass-to-starttransition-executes-immediately-the-function-i-pass-to-starttransition-executes-immediately">The function I pass to <code>startTransition</code> executes immediately {/<em>the-function-i-pass-to-starttransition-executes-immediately</em>/}</a></h3>
<p>If you run this code, it will print 1, 2, 3:</p>
<pre><code class="language-js {1 3 6}">console.log(1);
startTransition(() =&gt; {
  console.log(2);
  setPage('/about');
});
console.log(3);
</code></pre>
<p><strong>It is expected to print 1, 2, 3.</strong> The function you pass to <code>startTransition</code> does not get delayed. Unlike with the browser <code>setTimeout</code>, it does not run the callback later. React executes your function immediately, but any state updates scheduled <em>while it is running</em> will get marked as transitions. You can imagine that it works like this:</p>
<pre><code class="language-js">// A simplified version of how React works

let isInsideTransition = false;

function startTransition(scope) {
  isInsideTransition = true;
  scope();
  isInsideTransition = false;
}

function setState() {
  if (isInsideTransition) {
    // ... schedule a transition state update ...
  } else {
    // ... schedule an urgent state update ...
  }
}
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../reference/react/useSyncExternalStore.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../reference/react/apis.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../reference/react/useSyncExternalStore.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../reference/react/apis.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
