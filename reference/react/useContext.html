<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>useContext - React 18 Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../../favicon.svg">
        <link rel="shortcut icon" href="../../favicon.png">
        <link rel="stylesheet" href="../../css/variables.css">
        <link rel="stylesheet" href="../../css/general.css">
        <link rel="stylesheet" href="../../css/chrome.css">
        <link rel="stylesheet" href="../../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../../highlight.css">
        <link rel="stylesheet" href="../../tomorrow-night.css">
        <link rel="stylesheet" href="../../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Get Started</li><li class="chapter-item expanded "><a href="../../learn/index.html"><strong aria-hidden="true">1.</strong> Quick Start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/tutorial-tic-tac-toe.html"><strong aria-hidden="true">1.1.</strong> Tutorial: Tic-Tac-Toe</a></li><li class="chapter-item expanded "><a href="../../learn/thinking-in-react.html"><strong aria-hidden="true">1.2.</strong> Thinking in React</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Learn React</li><li class="chapter-item expanded "><a href="../../learn/describing-the-ui.html"><strong aria-hidden="true">2.</strong> Describing the UI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/your-first-component.html"><strong aria-hidden="true">2.1.</strong> Your First Component</a></li><li class="chapter-item expanded "><a href="../../learn/importing-and-exporting-components.html"><strong aria-hidden="true">2.2.</strong> Importing and Exporting Components</a></li><li class="chapter-item expanded "><a href="../../learn/writing-markup-with-jsx.html"><strong aria-hidden="true">2.3.</strong> WritiPng Markup with JSX</a></li><li class="chapter-item expanded "><a href="../../learn/javascript-in-jsx-with-curly-braces.html"><strong aria-hidden="true">2.4.</strong> JavaScript in JSX with Curly Braces</a></li><li class="chapter-item expanded "><a href="../../learn/passing-props-to-a-component.html"><strong aria-hidden="true">2.5.</strong> Passing Props to a Component</a></li><li class="chapter-item expanded "><a href="../../learn/conditional-rendering.html"><strong aria-hidden="true">2.6.</strong> Conditional Rendering</a></li><li class="chapter-item expanded "><a href="../../learn/rendering-lists.html"><strong aria-hidden="true">2.7.</strong> Rendering Lists</a></li><li class="chapter-item expanded "><a href="../../learn/keeping-components-pure.html"><strong aria-hidden="true">2.8.</strong> Keeping Components Pure</a></li></ol></li><li class="chapter-item expanded "><a href="../../learn/adding-interactivity.html"><strong aria-hidden="true">3.</strong> Adding Interactivity</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/responding-to-events.html"><strong aria-hidden="true">3.1.</strong> Responding to Events</a></li><li class="chapter-item expanded "><a href="../../learn/state-a-components-memory.html"><strong aria-hidden="true">3.2.</strong> State: A Component's Memory</a></li><li class="chapter-item expanded "><a href="../../learn/render-and-commit.html"><strong aria-hidden="true">3.3.</strong> Render and Commit</a></li><li class="chapter-item expanded "><a href="../../learn/state-as-a-snapshot.html"><strong aria-hidden="true">3.4.</strong> State as a Snapshot</a></li><li class="chapter-item expanded "><a href="../../learn/queueing-a-series-of-state-updates.html"><strong aria-hidden="true">3.5.</strong> Queueing a Series of State Updates</a></li><li class="chapter-item expanded "><a href="../../learn/updating-objects-in-state.html"><strong aria-hidden="true">3.6.</strong> Updating Objects in State</a></li><li class="chapter-item expanded "><a href="../../learn/updating-arrays-in-state.html"><strong aria-hidden="true">3.7.</strong> Updating Arrays in State</a></li></ol></li><li class="chapter-item expanded "><a href="../../learn/managing-state.html"><strong aria-hidden="true">4.</strong> Managing State</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/reacting-to-input-with-state.html"><strong aria-hidden="true">4.1.</strong> Reacting to Input with State</a></li><li class="chapter-item expanded "><a href="../../learn/choosing-the-state-structure.html"><strong aria-hidden="true">4.2.</strong> Choosing the State Structure</a></li><li class="chapter-item expanded "><a href="../../learn/sharing-state-between-components.html"><strong aria-hidden="true">4.3.</strong> Sharing State Between Components</a></li><li class="chapter-item expanded "><a href="../../learn/preserving-and-resetting-state.html"><strong aria-hidden="true">4.4.</strong> Preserving and Resetting State</a></li><li class="chapter-item expanded "><a href="../../learn/extracting-state-logic-into-a-reducer.html"><strong aria-hidden="true">4.5.</strong> Extracting State Logic into a Reducer</a></li><li class="chapter-item expanded "><a href="../../learn/passing-data-deeply-with-context.html"><strong aria-hidden="true">4.6.</strong> Passing Data Deeply with Context</a></li><li class="chapter-item expanded "><a href="../../learn/scaling-up-with-reducer-and-context.html"><strong aria-hidden="true">4.7.</strong> Scaling Up with Reducer and Context</a></li></ol></li><li class="chapter-item expanded "><a href="../../learn/escape-hatches.html"><strong aria-hidden="true">5.</strong> Escape Hatches</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../learn/referencing-values-with-refs.html"><strong aria-hidden="true">5.1.</strong> Referencing Values with Refs</a></li><li class="chapter-item expanded "><a href="../../learn/manipulating-the-dom-with-refs.html"><strong aria-hidden="true">5.2.</strong> Manipulating the DOM with Refs</a></li><li class="chapter-item expanded "><a href="../../learn/synchronizing-with-effects.html"><strong aria-hidden="true">5.3.</strong> Synchronizing with Effects</a></li><li class="chapter-item expanded "><a href="../../learn/you-might-not-need-an-effect.html"><strong aria-hidden="true">5.4.</strong> You Might Not Need an Effect</a></li><li class="chapter-item expanded "><a href="../../learn/lifecycle-of-reactive-effects.html"><strong aria-hidden="true">5.5.</strong> Lifecycle of Reactive Effects</a></li><li class="chapter-item expanded "><a href="../../learn/separating-events-from-effects.html"><strong aria-hidden="true">5.6.</strong> Separating Events from Effects</a></li><li class="chapter-item expanded "><a href="../../learn/removing-effect-dependencies.html"><strong aria-hidden="true">5.7.</strong> Removing Effect Dependencies</a></li><li class="chapter-item expanded "><a href="../../learn/reusing-logic-with-custom-hooks.html"><strong aria-hidden="true">5.8.</strong> Reusing Logic with Custom Hooks</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference</li><li class="chapter-item expanded affix "><li class="part-title">'react' package</li><li class="chapter-item expanded "><a href="../../reference/react/components.html"><strong aria-hidden="true">6.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/Fragment.html"><strong aria-hidden="true">6.1.</strong> &lt;Fragment&gt; (&lt;&gt;...&lt;/&gt;)</a></li><li class="chapter-item expanded "><a href="../../reference/react/Profiler.html"><strong aria-hidden="true">6.2.</strong> &lt;Profiler&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react/StrictMode.html"><strong aria-hidden="true">6.3.</strong> &lt;StrictMode&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react/Suspense.html"><strong aria-hidden="true">6.4.</strong> &lt;Suspense&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react/index.html"><strong aria-hidden="true">7.</strong> Hooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/useCallback.html"><strong aria-hidden="true">7.1.</strong> useCallback</a></li><li class="chapter-item expanded "><a href="../../reference/react/useContext.html" class="active"><strong aria-hidden="true">7.2.</strong> useContext</a></li><li class="chapter-item expanded "><a href="../../reference/react/useDebugValue.html"><strong aria-hidden="true">7.3.</strong> useDebugValue</a></li><li class="chapter-item expanded "><a href="../../reference/react/useDeferredValue.html"><strong aria-hidden="true">7.4.</strong> useDeferredValue</a></li><li class="chapter-item expanded "><a href="../../reference/react/useEffect.html"><strong aria-hidden="true">7.5.</strong> useEffect</a></li><li class="chapter-item expanded "><a href="../../reference/react/useId.html"><strong aria-hidden="true">7.6.</strong> useId</a></li><li class="chapter-item expanded "><a href="../../reference/react/useImperativeHandle.html"><strong aria-hidden="true">7.7.</strong> useImperativeHandle</a></li><li class="chapter-item expanded "><a href="../../reference/react/useInsertionEffect.html"><strong aria-hidden="true">7.8.</strong> useInsertionEffect</a></li><li class="chapter-item expanded "><a href="../../reference/react/useLayoutEffect.html"><strong aria-hidden="true">7.9.</strong> useLayoutEffect</a></li><li class="chapter-item expanded "><a href="../../reference/react/useMemo.html"><strong aria-hidden="true">7.10.</strong> useMemo</a></li><li class="chapter-item expanded "><a href="../../reference/react/useReducer.html"><strong aria-hidden="true">7.11.</strong> useReducer</a></li><li class="chapter-item expanded "><a href="../../reference/react/useRef.html"><strong aria-hidden="true">7.12.</strong> useRef</a></li><li class="chapter-item expanded "><a href="../../reference/react/useState.html"><strong aria-hidden="true">7.13.</strong> useState</a></li><li class="chapter-item expanded "><a href="../../reference/react/useSyncExternalStore.html"><strong aria-hidden="true">7.14.</strong> useSyncExternalStore</a></li><li class="chapter-item expanded "><a href="../../reference/react/useTransition.html"><strong aria-hidden="true">7.15.</strong> useTransition</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react/apis.html"><strong aria-hidden="true">8.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/createContext.html"><strong aria-hidden="true">8.1.</strong> createContext</a></li><li class="chapter-item expanded "><a href="../../reference/react/forwardRef.html"><strong aria-hidden="true">8.2.</strong> forwardRef</a></li><li class="chapter-item expanded "><a href="../../reference/react/lazy.html"><strong aria-hidden="true">8.3.</strong> lazy</a></li><li class="chapter-item expanded "><a href="../../reference/react/memo.html"><strong aria-hidden="true">8.4.</strong> memo</a></li><li class="chapter-item expanded "><a href="../../reference/react/startTransition.html"><strong aria-hidden="true">8.5.</strong> startTransition</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">'react-dom' package</li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/index.html"><strong aria-hidden="true">9.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/components/common.html"><strong aria-hidden="true">9.1.</strong> Common components (e.g. &lt;div&gt;)</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/input.html"><strong aria-hidden="true">9.2.</strong> &lt;input&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/option.html"><strong aria-hidden="true">9.3.</strong> &lt;option&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/progress.html"><strong aria-hidden="true">9.4.</strong> &lt;progress&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/select.html"><strong aria-hidden="true">9.5.</strong> &lt;select&gt;</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/components/textarea.html"><strong aria-hidden="true">9.6.</strong> &lt;textarea&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react-dom/index.html"><strong aria-hidden="true">10.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/createPortal.html"><strong aria-hidden="true">10.1.</strong> createPortal</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/flushSync.html"><strong aria-hidden="true">10.2.</strong> flushSync</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/findDOMNode.html"><strong aria-hidden="true">10.3.</strong> findDOMNode</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/hydrate.html"><strong aria-hidden="true">10.4.</strong> hydrate</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/render.html"><strong aria-hidden="true">10.5.</strong> render</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/unmountComponentAtNode.html"><strong aria-hidden="true">10.6.</strong> unmountComponentAtNode</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react-dom/client/index.html"><strong aria-hidden="true">11.</strong> Client APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/client/createRoot.html"><strong aria-hidden="true">11.1.</strong> createRoot</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/client/hydrateRoot.html"><strong aria-hidden="true">11.2.</strong> hydrateRoot</a></li></ol></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/index.html"><strong aria-hidden="true">12.</strong> Server APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToNodeStream.html"><strong aria-hidden="true">12.1.</strong> renderToNodeStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToPipeableStream.html"><strong aria-hidden="true">12.2.</strong> renderToPipeableStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToReadableStream.html"><strong aria-hidden="true">12.3.</strong> renderToReadableStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToStaticMarkup.html"><strong aria-hidden="true">12.4.</strong> renderToStaticMarkup</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToStaticNodeStream.html"><strong aria-hidden="true">12.5.</strong> renderToStaticNodeStream</a></li><li class="chapter-item expanded "><a href="../../reference/react-dom/server/renderToString.html"><strong aria-hidden="true">12.6.</strong> renderToString</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Legacy APIs</li><li class="chapter-item expanded "><a href="../../reference/react/legacy.html"><strong aria-hidden="true">13.</strong> Legacy React APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../../reference/react/Children.html"><strong aria-hidden="true">13.1.</strong> Children</a></li><li class="chapter-item expanded "><a href="../../reference/react/cloneElement.html"><strong aria-hidden="true">13.2.</strong> cloneElement</a></li><li class="chapter-item expanded "><a href="../../reference/react/Component.html"><strong aria-hidden="true">13.3.</strong> Component</a></li><li class="chapter-item expanded "><a href="../../reference/react/createElement.html"><strong aria-hidden="true">13.4.</strong> createElement</a></li><li class="chapter-item expanded "><a href="../../reference/react/createFactory.html"><strong aria-hidden="true">13.5.</strong> createFactory</a></li><li class="chapter-item expanded "><a href="../../reference/react/createRef.html"><strong aria-hidden="true">13.6.</strong> createRef</a></li><li class="chapter-item expanded "><a href="../../reference/react/isValidElement.html"><strong aria-hidden="true">13.7.</strong> isValidElement</a></li><li class="chapter-item expanded "><a href="../../reference/react/PureComponent.html"><strong aria-hidden="true">13.8.</strong> PureComponent</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">React 18 Docs</h1>

                    <div class="right-buttons">
                        <a href="../../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<h2 id="title-usecontext"><a class="header" href="#title-usecontext">title: useContext</a></h2>
<Intro>
<p><code>useContext</code> is a React Hook that lets you read and subscribe to <a href="/learn/passing-data-deeply-with-context">context</a> from your component.</p>
<pre><code class="language-js">const value = useContext(SomeContext)
</code></pre>
</Intro>
<InlineToc />
<hr />
<h2 id="reference-reference"><a class="header" href="#reference-reference">Reference {/<em>reference</em>/}</a></h2>
<h3 id="usecontextsomecontext-usecontext"><a class="header" href="#usecontextsomecontext-usecontext"><code>useContext(SomeContext)</code> {/<em>usecontext</em>/}</a></h3>
<p>Call <code>useContext</code> at the top level of your component to read and subscribe to <a href="/learn/passing-data-deeply-with-context">context.</a></p>
<pre><code class="language-js">import { useContext } from 'react';

function MyComponent() {
  const theme = useContext(ThemeContext);
  // ...
</code></pre>
<p><a href="#usage">See more examples below.</a></p>
<h4 id="parameters-parameters"><a class="header" href="#parameters-parameters">Parameters {/<em>parameters</em>/}</a></h4>
<ul>
<li><code>SomeContext</code>: The context that you've previously created with <a href="/reference/react/createContext"><code>createContext</code></a>. The context itself does not hold the information, it only represents the kind of information you can provide or read from components.</li>
</ul>
<h4 id="returns-returns"><a class="header" href="#returns-returns">Returns {/<em>returns</em>/}</a></h4>
<p><code>useContext</code> returns the context value for the calling component. It is determined as the <code>value</code> passed to the closest <code>SomeContext.Provider</code> above the calling component in the tree. If there is no such provider, then the returned value will be the <code>defaultValue</code> you have passed to <a href="/reference/react/createContext"><code>createContext</code></a> for that context. The returned value is always up-to-date. React automatically re-renders components that read some context if it changes.</p>
<h4 id="caveats-caveats"><a class="header" href="#caveats-caveats">Caveats {/<em>caveats</em>/}</a></h4>
<ul>
<li><code>useContext()</code> call in a component is not affected by providers returned from the <em>same</em> component. The corresponding <code>&lt;Context.Provider&gt;</code> <strong>needs to be <em>above</em></strong> the component doing the <code>useContext()</code> call.</li>
<li>React <strong>automatically re-renders</strong> all the children that use a particular context starting from the provider that receives a different <code>value</code>. The previous and the next values are compared with the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/is"><code>Object.is</code></a> comparison. Skipping re-renders with <a href="/reference/react/memo"><code>memo</code></a> does not prevent the children receiving fresh context values from above.</li>
<li>If your build system produces duplicates modules in the output (which can happen if you use symlinks), this can break context. Passing something via context only works if <code>SomeContext</code> that you use to provide context and <code>SomeContext</code> that you use to read it are <strong><em>exactly</em> the same object</strong>, as determined by a <code>===</code> comparison.</li>
</ul>
<hr />
<h2 id="usage-usage"><a class="header" href="#usage-usage">Usage {/<em>usage</em>/}</a></h2>
<h3 id="passing-data-deeply-into-the-tree-passing-data-deeply-into-the-tree"><a class="header" href="#passing-data-deeply-into-the-tree-passing-data-deeply-into-the-tree">Passing data deeply into the tree {/<em>passing-data-deeply-into-the-tree</em>/}</a></h3>
<p>Call <code>useContext</code> at the top level of your component to read and subscribe to <a href="/learn/passing-data-deeply-with-context">context.</a></p>
<pre><code class="language-js [[2  4  &quot;theme&quot;]  [1  4  &quot;ThemeContext&quot;]]">import { useContext } from 'react';

function Button() {
  const theme = useContext(ThemeContext);
  // ... 
</code></pre>
<p><code>useContext</code> returns the <CodeStep step={2}>context value</CodeStep> for the <CodeStep step={1}>context</CodeStep> you passed. To determine the context value, React searches the component tree and finds <strong>the closest context provider above</strong> for that particular context.</p>
<p>To pass context to a <code>Button</code>, wrap it or one of its parent components into the corresponding context provider:</p>
<pre><code class="language-js [[1  3  &quot;ThemeContext&quot;]  [2  3  &quot;\&quot;dark\&quot;&quot;]  [1  5  &quot;ThemeContext&quot;]]">function MyPage() {
  return (
    &lt;ThemeContext.Provider value=&quot;dark&quot;&gt;
      &lt;Form /&gt;
    &lt;/ThemeContext.Provider&gt;
  );
}

function Form() {
  // ... renders buttons inside ...
}
</code></pre>
<p>It doesn't matter how many layers of components there are between the provider and the <code>Button</code>. When a <code>Button</code> <em>anywhere</em> inside of <code>Form</code> calls <code>useContext(ThemeContext)</code>, it will receive <code>&quot;dark&quot;</code> as the value.</p>
<Pitfall>
<p><code>useContext()</code> always looks for the closest provider <em>above</em> the component that calls it. It searches upwards and <strong>does not</strong> consider providers in the component from which you're calling <code>useContext()</code>.</p>
</Pitfall>
<Sandpack>
<pre><code class="language-js">import { createContext, useContext } from 'react';

const ThemeContext = createContext(null);

export default function MyApp() {
  return (
    &lt;ThemeContext.Provider value=&quot;dark&quot;&gt;
      &lt;Form /&gt;
    &lt;/ThemeContext.Provider&gt;
  )
}

function Form() {
  return (
    &lt;Panel title=&quot;Welcome&quot;&gt;
      &lt;Button&gt;Sign up&lt;/Button&gt;
      &lt;Button&gt;Log in&lt;/Button&gt;
    &lt;/Panel&gt;
  );
}

function Panel({ title, children }) {
  const theme = useContext(ThemeContext);
  const className = 'panel-' + theme;
  return (
    &lt;section className={className}&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      {children}
    &lt;/section&gt;
  )
}

function Button({ children }) {
  const theme = useContext(ThemeContext);
  const className = 'button-' + theme;
  return (
    &lt;button className={className}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-css">.panel-light,
.panel-dark {
  border: 1px solid black;
  border-radius: 4px;
  padding: 20px;
}
.panel-light {
  color: #222;
  background: #fff;
}

.panel-dark {
  color: #fff;
  background: rgb(23, 32, 42);
}

.button-light,
.button-dark {
  border: 1px solid #777;
  padding: 5px;
  margin-right: 10px;
  margin-top: 10px;
}

.button-dark {
  background: #222;
  color: #fff;
}

.button-light {
  background: #fff;
  color: #222;
}
</code></pre>
</Sandpack>
<hr />
<h3 id="updating-data-passed-via-context-updating-data-passed-via-context"><a class="header" href="#updating-data-passed-via-context-updating-data-passed-via-context">Updating data passed via context {/<em>updating-data-passed-via-context</em>/}</a></h3>
<p>Often, you'll want the context to change over time. To update context, you need to combine it with <a href="/reference/react/useState">state.</a> Declare a state variable in the parent component, and pass the current state down as the <CodeStep step={2}>context value</CodeStep> to the provider.</p>
<pre><code class="language-js {2} [[1  4  &quot;ThemeContext&quot;]  [2  4  &quot;theme&quot;]  [1  11  &quot;ThemeContext&quot;]]">function MyPage() {
  const [theme, setTheme] = useState('dark');
  return (
    &lt;ThemeContext.Provider value={theme}&gt;
      &lt;Form /&gt;
      &lt;Button onClick={() =&gt; {
        setTheme('light');
      }}&gt;
        Switch to light theme
      &lt;/Button&gt;
    &lt;/ThemeContext.Provider&gt;
  );
}
</code></pre>
<p>Now any <code>Button</code> inside of the provider will receive the current <code>theme</code> value. If you call <code>setTheme</code> to update the <code>theme</code> value that you pass to the provider, all <code>Button</code> components will re-render with the new <code>'light'</code> value.</p>
<Recipes titleText="Examples of updating context" titleId="examples-basic">
<h4 id="updating-a-value-via-context-updating-a-value-via-context"><a class="header" href="#updating-a-value-via-context-updating-a-value-via-context">Updating a value via context {/<em>updating-a-value-via-context</em>/}</a></h4>
<p>In this example, the <code>MyApp</code> component holds a state variable which is then passed to the <code>ThemeContext</code> provider. Checking the &quot;Dark mode&quot; checkbox updates the state. Changing the provided value re-renders all the components using that context.</p>
<Sandpack>
<pre><code class="language-js">import { createContext, useContext, useState } from 'react';

const ThemeContext = createContext(null);

export default function MyApp() {
  const [theme, setTheme] = useState('light');
  return (
    &lt;ThemeContext.Provider value={theme}&gt;
      &lt;Form /&gt;
      &lt;label&gt;
        &lt;input
          type=&quot;checkbox&quot;
          checked={theme === 'dark'}
          onChange={(e) =&gt; {
            setTheme(e.target.checked ? 'dark' : 'light')
          }}
        /&gt;
        Use dark mode
      &lt;/label&gt;
    &lt;/ThemeContext.Provider&gt;
  )
}

function Form({ children }) {
  return (
    &lt;Panel title=&quot;Welcome&quot;&gt;
      &lt;Button&gt;Sign up&lt;/Button&gt;
      &lt;Button&gt;Log in&lt;/Button&gt;
    &lt;/Panel&gt;
  );
}

function Panel({ title, children }) {
  const theme = useContext(ThemeContext);
  const className = 'panel-' + theme;
  return (
    &lt;section className={className}&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      {children}
    &lt;/section&gt;
  )
}

function Button({ children }) {
  const theme = useContext(ThemeContext);
  const className = 'button-' + theme;
  return (
    &lt;button className={className}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-css">.panel-light,
.panel-dark {
  border: 1px solid black;
  border-radius: 4px;
  padding: 20px;
  margin-bottom: 10px;
}
.panel-light {
  color: #222;
  background: #fff;
}

.panel-dark {
  color: #fff;
  background: rgb(23, 32, 42);
}

.button-light,
.button-dark {
  border: 1px solid #777;
  padding: 5px;
  margin-right: 10px;
  margin-top: 10px;
}

.button-dark {
  background: #222;
  color: #fff;
}

.button-light {
  background: #fff;
  color: #222;
}
</code></pre>
</Sandpack>
<p>Note that <code>value=&quot;dark&quot;</code> passes the <code>&quot;dark&quot;</code> string, but <code>value={theme}</code> passes the value of the JavaScript <code>theme</code> variable with <a href="/learn/javascript-in-jsx-with-curly-braces">JSX curly braces.</a> Curly braces also let you pass context values that aren't strings.</p>
<Solution />
<h4 id="updating-an-object-via-context-updating-an-object-via-context"><a class="header" href="#updating-an-object-via-context-updating-an-object-via-context">Updating an object via context {/<em>updating-an-object-via-context</em>/}</a></h4>
<p>In this example, there is a <code>currentUser</code> state variable which holds an object. You combine <code>{ currentUser, setCurrentUser }</code> into a single object and pass it down through the context inside the <code>value={}</code>. This lets any component below, such as <code>LoginButton</code>, read both <code>currentUser</code> and <code>setCurrentUser</code>, and then call <code>setCurrentUser</code> when needed.</p>
<Sandpack>
<pre><code class="language-js">import { createContext, useContext, useState } from 'react';

const CurrentUserContext = createContext(null);

export default function MyApp() {
  const [currentUser, setCurrentUser] = useState(null);
  return (
    &lt;CurrentUserContext.Provider
      value={{
        currentUser,
        setCurrentUser
      }}
    &gt;
      &lt;Form /&gt;
    &lt;/CurrentUserContext.Provider&gt;
  );
}

function Form({ children }) {
  return (
    &lt;Panel title=&quot;Welcome&quot;&gt;
      &lt;LoginButton /&gt;
    &lt;/Panel&gt;
  );
}

function LoginButton() {
  const {
    currentUser,
    setCurrentUser
  } = useContext(CurrentUserContext);

  if (currentUser !== null) {
    return &lt;p&gt;You logged in as {currentUser.name}.&lt;/p&gt;;
  }

  return (
    &lt;Button onClick={() =&gt; {
      setCurrentUser({ name: 'Advika' })
    }}&gt;Log in as Advika&lt;/Button&gt;
  );
}

function Panel({ title, children }) {
  return (
    &lt;section className=&quot;panel&quot;&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      {children}
    &lt;/section&gt;
  )
}

function Button({ children, onClick }) {
  return (
    &lt;button className=&quot;button&quot; onClick={onClick}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-css">label {
  display: block;
}

.panel {
  border: 1px solid black;
  border-radius: 4px;
  padding: 20px;
  margin-bottom: 10px;
}

.button {
  border: 1px solid #777;
  padding: 5px;
  margin-right: 10px;
  margin-top: 10px;
}
</code></pre>
</Sandpack>
<Solution />
<h4 id="multiple-contexts-multiple-contexts"><a class="header" href="#multiple-contexts-multiple-contexts">Multiple contexts {/<em>multiple-contexts</em>/}</a></h4>
<p>In this example, there are two independent contexts. <code>ThemeContext</code> provides the current theme, which is a string, while <code>CurrentUserContext</code> holds the object representing the current user.</p>
<Sandpack>
<pre><code class="language-js">import { createContext, useContext, useState } from 'react';

const ThemeContext = createContext(null);
const CurrentUserContext = createContext(null);

export default function MyApp() {
  const [theme, setTheme] = useState('light');
  const [currentUser, setCurrentUser] = useState(null);
  return (
    &lt;ThemeContext.Provider value={theme}&gt;
      &lt;CurrentUserContext.Provider
        value={{
          currentUser,
          setCurrentUser
        }}
      &gt;
        &lt;WelcomePanel /&gt;
        &lt;label&gt;
          &lt;input
            type=&quot;checkbox&quot;
            checked={theme === 'dark'}
            onChange={(e) =&gt; {
              setTheme(e.target.checked ? 'dark' : 'light')
            }}
          /&gt;
          Use dark mode
        &lt;/label&gt;
      &lt;/CurrentUserContext.Provider&gt;
    &lt;/ThemeContext.Provider&gt;
  )
}

function WelcomePanel({ children }) {
  const {currentUser} = useContext(CurrentUserContext);
  return (
    &lt;Panel title=&quot;Welcome&quot;&gt;
      {currentUser !== null ?
        &lt;Greeting /&gt; :
        &lt;LoginForm /&gt;
      }
    &lt;/Panel&gt;
  );
}

function Greeting() {
  const {currentUser} = useContext(CurrentUserContext);
  return (
    &lt;p&gt;You logged in as {currentUser.name}.&lt;/p&gt;
  )
}

function LoginForm() {
  const {setCurrentUser} = useContext(CurrentUserContext);
  const [firstName, setFirstName] = useState('');
  const [lastName, setLastName] = useState('');
  const canLogin = firstName !== '' &amp;&amp; lastName !== '';
  return (
    &lt;&gt;
      &lt;label&gt;
        First name{': '}
        &lt;input
          required
          value={firstName}
          onChange={e =&gt; setFirstName(e.target.value)}
        /&gt;
      &lt;/label&gt;
      &lt;label&gt;
        Last name{': '}
        &lt;input
        required
          value={lastName}
          onChange={e =&gt; setLastName(e.target.value)}
        /&gt;
      &lt;/label&gt;
      &lt;Button
        disabled={!canLogin}
        onClick={() =&gt; {
          setCurrentUser({
            name: firstName + ' ' + lastName
          });
        }}
      &gt;
        Log in
      &lt;/Button&gt;
      {!canLogin &amp;&amp; &lt;i&gt;Fill in both fields.&lt;/i&gt;}
    &lt;/&gt;
  );
}

function Panel({ title, children }) {
  const theme = useContext(ThemeContext);
  const className = 'panel-' + theme;
  return (
    &lt;section className={className}&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      {children}
    &lt;/section&gt;
  )
}

function Button({ children, disabled, onClick }) {
  const theme = useContext(ThemeContext);
  const className = 'button-' + theme;
  return (
    &lt;button
      className={className}
      disabled={disabled}
      onClick={onClick}
    &gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-css">label {
  display: block;
}

.panel-light,
.panel-dark {
  border: 1px solid black;
  border-radius: 4px;
  padding: 20px;
  margin-bottom: 10px;
}
.panel-light {
  color: #222;
  background: #fff;
}

.panel-dark {
  color: #fff;
  background: rgb(23, 32, 42);
}

.button-light,
.button-dark {
  border: 1px solid #777;
  padding: 5px;
  margin-right: 10px;
  margin-top: 10px;
}

.button-dark {
  background: #222;
  color: #fff;
}

.button-light {
  background: #fff;
  color: #222;
}
</code></pre>
</Sandpack>
<Solution />
<h4 id="extracting-providers-to-a-component-extracting-providers-to-a-component"><a class="header" href="#extracting-providers-to-a-component-extracting-providers-to-a-component">Extracting providers to a component {/<em>extracting-providers-to-a-component</em>/}</a></h4>
<p>As your app grows, it is expected that you'll have a &quot;pyramid&quot; of contexts closer to the root of your app. There is nothing wrong with that. However, if you dislike the nesting aesthetically, you can extract the providers into a single component. In this example, <code>MyProviders</code> hides the &quot;plumbing&quot; and renders the children passed to it inside the necessary providers. Note that the <code>theme</code> and <code>setTheme</code> state is needed in <code>MyApp</code> itself, so <code>MyApp</code> still owns that piece of the state.</p>
<Sandpack>
<pre><code class="language-js">import { createContext, useContext, useState } from 'react';

const ThemeContext = createContext(null);
const CurrentUserContext = createContext(null);

export default function MyApp() {
  const [theme, setTheme] = useState('light');
  return (
    &lt;MyProviders theme={theme} setTheme={setTheme}&gt;
      &lt;WelcomePanel /&gt;
      &lt;label&gt;
        &lt;input
          type=&quot;checkbox&quot;
          checked={theme === 'dark'}
          onChange={(e) =&gt; {
            setTheme(e.target.checked ? 'dark' : 'light')
          }}
        /&gt;
        Use dark mode
      &lt;/label&gt;
    &lt;/MyProviders&gt;
  );
}

function MyProviders({ children, theme, setTheme }) {
  const [currentUser, setCurrentUser] = useState(null);
  return (
    &lt;ThemeContext.Provider value={theme}&gt;
      &lt;CurrentUserContext.Provider
        value={{
          currentUser,
          setCurrentUser
        }}
      &gt;
        {children}
      &lt;/CurrentUserContext.Provider&gt;
    &lt;/ThemeContext.Provider&gt;
  );
}

function WelcomePanel({ children }) {
  const {currentUser} = useContext(CurrentUserContext);
  return (
    &lt;Panel title=&quot;Welcome&quot;&gt;
      {currentUser !== null ?
        &lt;Greeting /&gt; :
        &lt;LoginForm /&gt;
      }
    &lt;/Panel&gt;
  );
}

function Greeting() {
  const {currentUser} = useContext(CurrentUserContext);
  return (
    &lt;p&gt;You logged in as {currentUser.name}.&lt;/p&gt;
  )
}

function LoginForm() {
  const {setCurrentUser} = useContext(CurrentUserContext);
  const [firstName, setFirstName] = useState('');
  const [lastName, setLastName] = useState('');
  const canLogin = firstName !== '' &amp;&amp; lastName !== '';
  return (
    &lt;&gt;
      &lt;label&gt;
        First name{': '}
        &lt;input
          required
          value={firstName}
          onChange={e =&gt; setFirstName(e.target.value)}
        /&gt;
      &lt;/label&gt;
      &lt;label&gt;
        Last name{': '}
        &lt;input
        required
          value={lastName}
          onChange={e =&gt; setLastName(e.target.value)}
        /&gt;
      &lt;/label&gt;
      &lt;Button
        disabled={!canLogin}
        onClick={() =&gt; {
          setCurrentUser({
            name: firstName + ' ' + lastName
          });
        }}
      &gt;
        Log in
      &lt;/Button&gt;
      {!canLogin &amp;&amp; &lt;i&gt;Fill in both fields.&lt;/i&gt;}
    &lt;/&gt;
  );
}

function Panel({ title, children }) {
  const theme = useContext(ThemeContext);
  const className = 'panel-' + theme;
  return (
    &lt;section className={className}&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      {children}
    &lt;/section&gt;
  )
}

function Button({ children, disabled, onClick }) {
  const theme = useContext(ThemeContext);
  const className = 'button-' + theme;
  return (
    &lt;button
      className={className}
      disabled={disabled}
      onClick={onClick}
    &gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-css">label {
  display: block;
}

.panel-light,
.panel-dark {
  border: 1px solid black;
  border-radius: 4px;
  padding: 20px;
  margin-bottom: 10px;
}
.panel-light {
  color: #222;
  background: #fff;
}

.panel-dark {
  color: #fff;
  background: rgb(23, 32, 42);
}

.button-light,
.button-dark {
  border: 1px solid #777;
  padding: 5px;
  margin-right: 10px;
  margin-top: 10px;
}

.button-dark {
  background: #222;
  color: #fff;
}

.button-light {
  background: #fff;
  color: #222;
}
</code></pre>
</Sandpack>
<Solution />
<h4 id="scaling-up-with-context-and-a-reducer-scaling-up-with-context-and-a-reducer"><a class="header" href="#scaling-up-with-context-and-a-reducer-scaling-up-with-context-and-a-reducer">Scaling up with context and a reducer {/<em>scaling-up-with-context-and-a-reducer</em>/}</a></h4>
<p>In larger apps, it is common to combine context with a <a href="/reference/react/useReducer">reducer</a> to extract the logic related to some state out of components. In this example, all the &quot;wiring&quot; is hidden in the <code>TasksContext.js</code>, which contains a reducer and two separate contexts.</p>
<p>Read a <a href="/learn/scaling-up-with-reducer-and-context">full walkthrough</a> of this example.</p>
<Sandpack>
<pre><code class="language-js App.js">import AddTask from './AddTask.js';
import TaskList from './TaskList.js';
import { TasksProvider } from './TasksContext.js';

export default function TaskApp() {
  return (
    &lt;TasksProvider&gt;
      &lt;h1&gt;Day off in Kyoto&lt;/h1&gt;
      &lt;AddTask /&gt;
      &lt;TaskList /&gt;
    &lt;/TasksProvider&gt;
  );
}
</code></pre>
<pre><code class="language-js TasksContext.js">import { createContext, useContext, useReducer } from 'react';

const TasksContext = createContext(null);

const TasksDispatchContext = createContext(null);

export function TasksProvider({ children }) {
  const [tasks, dispatch] = useReducer(
    tasksReducer,
    initialTasks
  );

  return (
    &lt;TasksContext.Provider value={tasks}&gt;
      &lt;TasksDispatchContext.Provider value={dispatch}&gt;
        {children}
      &lt;/TasksDispatchContext.Provider&gt;
    &lt;/TasksContext.Provider&gt;
  );
}

export function useTasks() {
  return useContext(TasksContext);
}

export function useTasksDispatch() {
  return useContext(TasksDispatchContext);
}

function tasksReducer(tasks, action) {
  switch (action.type) {
    case 'added': {
      return [...tasks, {
        id: action.id,
        text: action.text,
        done: false
      }];
    }
    case 'changed': {
      return tasks.map(t =&gt; {
        if (t.id === action.task.id) {
          return action.task;
        } else {
          return t;
        }
      });
    }
    case 'deleted': {
      return tasks.filter(t =&gt; t.id !== action.id);
    }
    default: {
      throw Error('Unknown action: ' + action.type);
    }
  }
}

const initialTasks = [
  { id: 0, text: 'Philosopherâ€™s Path', done: true },
  { id: 1, text: 'Visit the temple', done: false },
  { id: 2, text: 'Drink matcha', done: false }
];
</code></pre>
<pre><code class="language-js AddTask.js">import { useState, useContext } from 'react';
import { useTasksDispatch } from './TasksContext.js';

export default function AddTask() {
  const [text, setText] = useState('');
  const dispatch = useTasksDispatch();
  return (
    &lt;&gt;
      &lt;input
        placeholder=&quot;Add task&quot;
        value={text}
        onChange={e =&gt; setText(e.target.value)}
      /&gt;
      &lt;button onClick={() =&gt; {
        setText('');
        dispatch({
          type: 'added',
          id: nextId++,
          text: text,
        }); 
      }}&gt;Add&lt;/button&gt;
    &lt;/&gt;
  );
}

let nextId = 3;
</code></pre>
<pre><code class="language-js TaskList.js">import { useState, useContext } from 'react';
import { useTasks, useTasksDispatch } from './TasksContext.js';

export default function TaskList() {
  const tasks = useTasks();
  return (
    &lt;ul&gt;
      {tasks.map(task =&gt; (
        &lt;li key={task.id}&gt;
          &lt;Task task={task} /&gt;
        &lt;/li&gt;
      ))}
    &lt;/ul&gt;
  );
}

function Task({ task }) {
  const [isEditing, setIsEditing] = useState(false);
  const dispatch = useTasksDispatch();
  let taskContent;
  if (isEditing) {
    taskContent = (
      &lt;&gt;
        &lt;input
          value={task.text}
          onChange={e =&gt; {
            dispatch({
              type: 'changed',
              task: {
                ...task,
                text: e.target.value
              }
            });
          }} /&gt;
        &lt;button onClick={() =&gt; setIsEditing(false)}&gt;
          Save
        &lt;/button&gt;
      &lt;/&gt;
    );
  } else {
    taskContent = (
      &lt;&gt;
        {task.text}
        &lt;button onClick={() =&gt; setIsEditing(true)}&gt;
          Edit
        &lt;/button&gt;
      &lt;/&gt;
    );
  }
  return (
    &lt;label&gt;
      &lt;input
        type=&quot;checkbox&quot;
        checked={task.done}
        onChange={e =&gt; {
          dispatch({
            type: 'changed',
            task: {
              ...task,
              done: e.target.checked
            }
          });
        }}
      /&gt;
      {taskContent}
      &lt;button onClick={() =&gt; {
        dispatch({
          type: 'deleted',
          id: task.id
        });
      }}&gt;
        Delete
      &lt;/button&gt;
    &lt;/label&gt;
  );
}
</code></pre>
<pre><code class="language-css">button { margin: 5px; }
li { list-style-type: none; }
ul, li { margin: 0; padding: 0; }
</code></pre>
</Sandpack>
<Solution />
</Recipes>
<hr />
<h3 id="specifying-a-fallback-default-value-specifying-a-fallback-default-value"><a class="header" href="#specifying-a-fallback-default-value-specifying-a-fallback-default-value">Specifying a fallback default value {/<em>specifying-a-fallback-default-value</em>/}</a></h3>
<p>If React can't find any providers of that particular <CodeStep step={1}>context</CodeStep> in the parent tree, the context value returned by <code>useContext()</code> will be equal to the <CodeStep step={3}>default value</CodeStep> that you specified when you <a href="/reference/react/createContext">created that context</a>:</p>
<pre><code class="language-js [[1  1  &quot;ThemeContext&quot;]  [3  1  &quot;null&quot;]]">const ThemeContext = createContext(null);
</code></pre>
<p>The default value <strong>never changes</strong>. If you want to update context, use it with state as <a href="#updating-data-passed-via-context">described above.</a></p>
<p>Often, instead of <code>null</code>, there is some more meaningful value you can use as a default, for example:</p>
<pre><code class="language-js [[1  1  &quot;ThemeContext&quot;]  [3  1  &quot;light&quot;]]">const ThemeContext = createContext('light');
</code></pre>
<p>This way, if you accidentally render some component without a corresponding provider, it won't break. This also helps your components work well in a test environment without setting up a lot of providers in the tests.</p>
<p>In the example below, the &quot;Toggle theme&quot; button is always light because it's <strong>outside any theme context provider</strong> and the default context theme value is <code>'light'</code>. Try editing the default theme to be <code>'dark'</code>.</p>
<Sandpack>
<pre><code class="language-js">import { createContext, useContext, useState } from 'react';

const ThemeContext = createContext('light');

export default function MyApp() {
  const [theme, setTheme] = useState('light');
  return (
    &lt;&gt;
      &lt;ThemeContext.Provider value={theme}&gt;
        &lt;Form /&gt;
      &lt;/ThemeContext.Provider&gt;
      &lt;Button onClick={() =&gt; {
        setTheme(theme === 'dark' ? 'light' : 'dark');
      }}&gt;
        Toggle theme
      &lt;/Button&gt;
    &lt;/&gt;
  )
}

function Form({ children }) {
  return (
    &lt;Panel title=&quot;Welcome&quot;&gt;
      &lt;Button&gt;Sign up&lt;/Button&gt;
      &lt;Button&gt;Log in&lt;/Button&gt;
    &lt;/Panel&gt;
  );
}

function Panel({ title, children }) {
  const theme = useContext(ThemeContext);
  const className = 'panel-' + theme;
  return (
    &lt;section className={className}&gt;
      &lt;h1&gt;{title}&lt;/h1&gt;
      {children}
    &lt;/section&gt;
  )
}

function Button({ children, onClick }) {
  const theme = useContext(ThemeContext);
  const className = 'button-' + theme;
  return (
    &lt;button className={className} onClick={onClick}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-css">.panel-light,
.panel-dark {
  border: 1px solid black;
  border-radius: 4px;
  padding: 20px;
  margin-bottom: 10px;
}
.panel-light {
  color: #222;
  background: #fff;
}

.panel-dark {
  color: #fff;
  background: rgb(23, 32, 42);
}

.button-light,
.button-dark {
  border: 1px solid #777;
  padding: 5px;
  margin-right: 10px;
  margin-top: 10px;
}

.button-dark {
  background: #222;
  color: #fff;
}

.button-light {
  background: #fff;
  color: #222;
}
</code></pre>
</Sandpack>
<hr />
<h3 id="overriding-context-for-a-part-of-the-tree-overriding-context-for-a-part-of-the-tree"><a class="header" href="#overriding-context-for-a-part-of-the-tree-overriding-context-for-a-part-of-the-tree">Overriding context for a part of the tree {/<em>overriding-context-for-a-part-of-the-tree</em>/}</a></h3>
<p>You can override the context for a part of the tree by wrapping that part in a provider with a different value.</p>
<pre><code class="language-js {3 5}">&lt;ThemeContext.Provider value=&quot;dark&quot;&gt;
  ...
  &lt;ThemeContext.Provider value=&quot;light&quot;&gt;
    &lt;Footer /&gt;
  &lt;/ThemeContext.Provider&gt;
  ...
&lt;/ThemeContext.Provider&gt;
</code></pre>
<p>You can nest and override providers as many times as you need.</p>
<Recipes title="Examples of overriding context">
<h4 id="overriding-a-theme-overriding-a-theme"><a class="header" href="#overriding-a-theme-overriding-a-theme">Overriding a theme {/<em>overriding-a-theme</em>/}</a></h4>
<p>Here, the button <em>inside</em> the <code>Footer</code> receives a different context value (<code>&quot;light&quot;</code>) than the buttons outside (<code>&quot;dark&quot;</code>).</p>
<Sandpack>
<pre><code class="language-js">import { createContext, useContext } from 'react';

const ThemeContext = createContext(null);

export default function MyApp() {
  return (
    &lt;ThemeContext.Provider value=&quot;dark&quot;&gt;
      &lt;Form /&gt;
    &lt;/ThemeContext.Provider&gt;
  )
}

function Form() {
  return (
    &lt;Panel title=&quot;Welcome&quot;&gt;
      &lt;Button&gt;Sign up&lt;/Button&gt;
      &lt;Button&gt;Log in&lt;/Button&gt;
      &lt;ThemeContext.Provider value=&quot;light&quot;&gt;
        &lt;Footer /&gt;
      &lt;/ThemeContext.Provider&gt;
    &lt;/Panel&gt;
  );
}

function Footer() {
  return (
    &lt;footer&gt;
      &lt;Button&gt;Settings&lt;/Button&gt;
    &lt;/footer&gt;
  );
}

function Panel({ title, children }) {
  const theme = useContext(ThemeContext);
  const className = 'panel-' + theme;
  return (
    &lt;section className={className}&gt;
      {title &amp;&amp; &lt;h1&gt;{title}&lt;/h1&gt;}
      {children}
    &lt;/section&gt;
  )
}

function Button({ children }) {
  const theme = useContext(ThemeContext);
  const className = 'button-' + theme;
  return (
    &lt;button className={className}&gt;
      {children}
    &lt;/button&gt;
  );
}
</code></pre>
<pre><code class="language-css">footer {
  margin-top: 20px;
  border-top: 1px solid #aaa;
}

.panel-light,
.panel-dark {
  border: 1px solid black;
  border-radius: 4px;
  padding: 20px;
}
.panel-light {
  color: #222;
  background: #fff;
}

.panel-dark {
  color: #fff;
  background: rgb(23, 32, 42);
}

.button-light,
.button-dark {
  border: 1px solid #777;
  padding: 5px;
  margin-right: 10px;
  margin-top: 10px;
}

.button-dark {
  background: #222;
  color: #fff;
}

.button-light {
  background: #fff;
  color: #222;
}
</code></pre>
</Sandpack>
<Solution />
<h4 id="automatically-nested-headings-automatically-nested-headings"><a class="header" href="#automatically-nested-headings-automatically-nested-headings">Automatically nested headings {/<em>automatically-nested-headings</em>/}</a></h4>
<p>You can &quot;accumulate&quot; information when you nest context providers. In this example, the <code>Section</code> component keeps track of the <code>LevelContext</code> which specifies the depth of the section nesting. It reads the <code>LevelContext</code> from the parent section, and provides the <code>LevelContext</code> number increased by one to its children. As a result, the <code>Heading</code> component can automatically decide which of the <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;h3&gt;</code>, ..., tags to use based on how many <code>Section</code> components it is nested inside of.</p>
<p>Read a <a href="/learn/passing-data-deeply-with-context">detailed walkthrough</a> of this example.</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function Page() {
  return (
    &lt;Section&gt;
      &lt;Heading&gt;Title&lt;/Heading&gt;
      &lt;Section&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Section&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Section&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
          &lt;/Section&gt;
        &lt;/Section&gt;
      &lt;/Section&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Section({ children }) {
  const level = useContext(LevelContext);
  return (
    &lt;section className=&quot;section&quot;&gt;
      &lt;LevelContext.Provider value={level + 1}&gt;
        {children}
      &lt;/LevelContext.Provider&gt;
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Heading({ children }) {
  const level = useContext(LevelContext);
  switch (level) {
    case 0:
      throw Error('Heading must be inside a Section!');
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-js LevelContext.js">import { createContext } from 'react';

export const LevelContext = createContext(0);
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}
</code></pre>
</Sandpack>
<Solution />
</Recipes>
<hr />
<h3 id="optimizing-re-renders-when-passing-objects-and-functions-optimizing-re-renders-when-passing-objects-and-functions"><a class="header" href="#optimizing-re-renders-when-passing-objects-and-functions-optimizing-re-renders-when-passing-objects-and-functions">Optimizing re-renders when passing objects and functions {/<em>optimizing-re-renders-when-passing-objects-and-functions</em>/}</a></h3>
<p>You can pass any values via context, including objects and functions.</p>
<pre><code class="language-js [[2  10  &quot;{ currentUser  login }&quot;]]">function MyApp() {
  const [currentUser, setCurrentUser] = useState(null);

  function login(response) {
    storeCredentials(response.credentials);
    setCurrentUser(response.user);
  }

  return (
    &lt;AuthContext.Provider value={{ currentUser, login }}&gt;
      &lt;Page /&gt;
    &lt;/AuthContext.Provider&gt;
  );
}
</code></pre>
<p>Here, the <CodeStep step={2}>context value</CodeStep> is a JavaScript object with two properties, one of which is a function. Whenever <code>MyApp</code> re-renders (for example, on a route update), this will be a <em>different</em> object pointing at a <em>different</em> function, so React will also have to re-render all components deep in the tree that call <code>useContext(AuthContext)</code>.</p>
<p>In smaller apps, this is not a problem. However, there is no need to re-render them if the underlying data, like <code>currentUser</code>, has not changed. To help React take advantage of that fact, you may wrap the <code>login</code> function with <a href="/reference/react/useCallback"><code>useCallback</code></a> and wrap the object creation into <a href="/reference/react/useMemo"><code>useMemo</code></a>. This is a performance optimization:</p>
<pre><code class="language-js {6 9 11 14 17}">import { useCallback, useMemo } from 'react';

function MyApp() {
  const [currentUser, setCurrentUser] = useState(null);

  const login = useCallback((response) =&gt; {
    storeCredentials(response.credentials);
    setCurrentUser(response.user);
  }, []);

  const contextValue = useMemo(() =&gt; ({
    currentUser,
    login
  }), [currentUser, login]);

  return (
    &lt;AuthContext.Provider value={contextValue}&gt;
      &lt;Page /&gt;
    &lt;/AuthContext.Provider&gt;
  );
}
</code></pre>
<p>As a result of this change, even if <code>MyApp</code> needs to re-render, the components calling <code>useContext(AuthProvider)</code> won't need to re-render unless <code>currentUser</code> has changed. Read more about <a href="/reference/react/useMemo#skipping-re-rendering-of-components"><code>useMemo</code></a> and <a href="/reference/react/useCallback#skipping-re-rendering-of-components"><code>useCallback</code>.</a></p>
<hr />
<h2 id="troubleshooting-troubleshooting"><a class="header" href="#troubleshooting-troubleshooting">Troubleshooting {/<em>troubleshooting</em>/}</a></h2>
<h3 id="my-component-doesnt-see-the-value-from-my-provider-my-component-doesnt-see-the-value-from-my-provider"><a class="header" href="#my-component-doesnt-see-the-value-from-my-provider-my-component-doesnt-see-the-value-from-my-provider">My component doesn't see the value from my provider {/<em>my-component-doesnt-see-the-value-from-my-provider</em>/}</a></h3>
<p>There are a few common ways that this can happen:</p>
<ol>
<li>You're rendering <code>&lt;SomeContext.Provider&gt;</code> in the same component (or below) as where you're calling <code>useContext()</code>. Move <code>&lt;SomeContext.Provider&gt;</code> <em>above and outside</em> the component calling <code>useContext()</code>.</li>
<li>You may have forgotten to wrap your component with <code>&lt;SomeContext.Provider&gt;</code>, or you might have put it in a different part of the tree than you thought. Check whether the hierarchy is right using <a href="/learn/react-developer-tools">React DevTools.</a></li>
<li>You might be running into some build issue with your tooling that causes <code>SomeContext</code> as seen from the providing component and <code>SomeContext</code> as seen by the reading component to be two different objects. This can happen if you use symlinks, for example. You can verify this by assigning them to globals like <code>window.SomeContext1</code> and <code>window.SomeContext2</code> and then checking whether <code>window.SomeContext1 === window.SomeContext2</code> in the console. If they're not the same, you need to fix that issue on the build tool level.</li>
</ol>
<h3 id="i-am-always-getting-undefined-from-my-context-although-the-default-value-is-different-i-am-always-getting-undefined-from-my-context-although-the-default-value-is-different"><a class="header" href="#i-am-always-getting-undefined-from-my-context-although-the-default-value-is-different-i-am-always-getting-undefined-from-my-context-although-the-default-value-is-different">I am always getting <code>undefined</code> from my context although the default value is different {/<em>i-am-always-getting-undefined-from-my-context-although-the-default-value-is-different</em>/}</a></h3>
<p>You might have a provider without a <code>value</code> in the tree:</p>
<pre><code class="language-js {1 2}">// ðŸš© Doesn't work: no value prop
&lt;ThemeContext.Provider&gt;
   &lt;Button /&gt;
&lt;/ThemeContext.Provider&gt;
</code></pre>
<p>If you forget to specify <code>value</code>, it's like passing <code>value={undefined}</code>.</p>
<p>You may have also mistakingly used a different prop name by mistake:</p>
<pre><code class="language-js {1 2}">// ðŸš© Doesn't work: prop should be called &quot;value&quot;
&lt;ThemeContext.Provider theme={theme}&gt;
   &lt;Button /&gt;
&lt;/ThemeContext.Provider&gt;
</code></pre>
<p>In both of these cases you should see a warning from React in the console. To fix them, call the prop <code>value</code>:</p>
<pre><code class="language-js {1 2}">// âœ… Passing the value prop
&lt;ThemeContext.Provider value={theme}&gt;
   &lt;Button /&gt;
&lt;/ThemeContext.Provider&gt;
</code></pre>
<p>Note that the <a href="#specifying-a-fallback-default-value">default value from your <code>createContext(defaultValue)</code> call</a> is only used <strong>if there is no matching provider above at all.</strong> If there is a <code>&lt;SomeContext.Provider value={undefined}&gt;</code> component somewhere in the parent tree, the component calling <code>useContext(SomeContext)</code> <em>will</em> receive <code>undefined</code> as the context value.</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../../reference/react/useCallback.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../../reference/react/useDebugValue.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../../reference/react/useCallback.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../../reference/react/useDebugValue.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../../elasticlunr.min.js"></script>
        <script src="../../mark.min.js"></script>
        <script src="../../searcher.js"></script>

        <script src="../../clipboard.min.js"></script>
        <script src="../../highlight.js"></script>
        <script src="../../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
