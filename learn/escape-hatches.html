<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Escape Hatches - React 18 Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Get Started</li><li class="chapter-item expanded "><a href="../learn/index.html"><strong aria-hidden="true">1.</strong> Quick Start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/tutorial-tic-tac-toe.html"><strong aria-hidden="true">1.1.</strong> Tutorial: Tic-Tac-Toe</a></li><li class="chapter-item expanded "><a href="../learn/thinking-in-react.html"><strong aria-hidden="true">1.2.</strong> Thinking in React</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Learn React</li><li class="chapter-item expanded "><a href="../learn/describing-the-ui.html"><strong aria-hidden="true">2.</strong> Describing the UI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/your-first-component.html"><strong aria-hidden="true">2.1.</strong> Your First Component</a></li><li class="chapter-item expanded "><a href="../learn/importing-and-exporting-components.html"><strong aria-hidden="true">2.2.</strong> Importing and Exporting Components</a></li><li class="chapter-item expanded "><a href="../learn/writing-markup-with-jsx.html"><strong aria-hidden="true">2.3.</strong> WritiPng Markup with JSX</a></li><li class="chapter-item expanded "><a href="../learn/javascript-in-jsx-with-curly-braces.html"><strong aria-hidden="true">2.4.</strong> JavaScript in JSX with Curly Braces</a></li><li class="chapter-item expanded "><a href="../learn/passing-props-to-a-component.html"><strong aria-hidden="true">2.5.</strong> Passing Props to a Component</a></li><li class="chapter-item expanded "><a href="../learn/conditional-rendering.html"><strong aria-hidden="true">2.6.</strong> Conditional Rendering</a></li><li class="chapter-item expanded "><a href="../learn/rendering-lists.html"><strong aria-hidden="true">2.7.</strong> Rendering Lists</a></li><li class="chapter-item expanded "><a href="../learn/keeping-components-pure.html"><strong aria-hidden="true">2.8.</strong> Keeping Components Pure</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/adding-interactivity.html"><strong aria-hidden="true">3.</strong> Adding Interactivity</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/responding-to-events.html"><strong aria-hidden="true">3.1.</strong> Responding to Events</a></li><li class="chapter-item expanded "><a href="../learn/state-a-components-memory.html"><strong aria-hidden="true">3.2.</strong> State: A Component's Memory</a></li><li class="chapter-item expanded "><a href="../learn/render-and-commit.html"><strong aria-hidden="true">3.3.</strong> Render and Commit</a></li><li class="chapter-item expanded "><a href="../learn/state-as-a-snapshot.html"><strong aria-hidden="true">3.4.</strong> State as a Snapshot</a></li><li class="chapter-item expanded "><a href="../learn/queueing-a-series-of-state-updates.html"><strong aria-hidden="true">3.5.</strong> Queueing a Series of State Updates</a></li><li class="chapter-item expanded "><a href="../learn/updating-objects-in-state.html"><strong aria-hidden="true">3.6.</strong> Updating Objects in State</a></li><li class="chapter-item expanded "><a href="../learn/updating-arrays-in-state.html"><strong aria-hidden="true">3.7.</strong> Updating Arrays in State</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/managing-state.html"><strong aria-hidden="true">4.</strong> Managing State</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/reacting-to-input-with-state.html"><strong aria-hidden="true">4.1.</strong> Reacting to Input with State</a></li><li class="chapter-item expanded "><a href="../learn/choosing-the-state-structure.html"><strong aria-hidden="true">4.2.</strong> Choosing the State Structure</a></li><li class="chapter-item expanded "><a href="../learn/sharing-state-between-components.html"><strong aria-hidden="true">4.3.</strong> Sharing State Between Components</a></li><li class="chapter-item expanded "><a href="../learn/preserving-and-resetting-state.html"><strong aria-hidden="true">4.4.</strong> Preserving and Resetting State</a></li><li class="chapter-item expanded "><a href="../learn/extracting-state-logic-into-a-reducer.html"><strong aria-hidden="true">4.5.</strong> Extracting State Logic into a Reducer</a></li><li class="chapter-item expanded "><a href="../learn/passing-data-deeply-with-context.html"><strong aria-hidden="true">4.6.</strong> Passing Data Deeply with Context</a></li><li class="chapter-item expanded "><a href="../learn/scaling-up-with-reducer-and-context.html"><strong aria-hidden="true">4.7.</strong> Scaling Up with Reducer and Context</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/escape-hatches.html" class="active"><strong aria-hidden="true">5.</strong> Escape Hatches</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/referencing-values-with-refs.html"><strong aria-hidden="true">5.1.</strong> Referencing Values with Refs</a></li><li class="chapter-item expanded "><a href="../learn/manipulating-the-dom-with-refs.html"><strong aria-hidden="true">5.2.</strong> Manipulating the DOM with Refs</a></li><li class="chapter-item expanded "><a href="../learn/synchronizing-with-effects.html"><strong aria-hidden="true">5.3.</strong> Synchronizing with Effects</a></li><li class="chapter-item expanded "><a href="../learn/you-might-not-need-an-effect.html"><strong aria-hidden="true">5.4.</strong> You Might Not Need an Effect</a></li><li class="chapter-item expanded "><a href="../learn/lifecycle-of-reactive-effects.html"><strong aria-hidden="true">5.5.</strong> Lifecycle of Reactive Effects</a></li><li class="chapter-item expanded "><a href="../learn/separating-events-from-effects.html"><strong aria-hidden="true">5.6.</strong> Separating Events from Effects</a></li><li class="chapter-item expanded "><a href="../learn/removing-effect-dependencies.html"><strong aria-hidden="true">5.7.</strong> Removing Effect Dependencies</a></li><li class="chapter-item expanded "><a href="../learn/reusing-logic-with-custom-hooks.html"><strong aria-hidden="true">5.8.</strong> Reusing Logic with Custom Hooks</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference</li><li class="chapter-item expanded affix "><li class="part-title">'react' package</li><li class="chapter-item expanded "><a href="../reference/react/components.html"><strong aria-hidden="true">6.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/Fragment.html"><strong aria-hidden="true">6.1.</strong> &lt;Fragment&gt; (&lt;&gt;...&lt;/&gt;)</a></li><li class="chapter-item expanded "><a href="../reference/react/Profiler.html"><strong aria-hidden="true">6.2.</strong> &lt;Profiler&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react/StrictMode.html"><strong aria-hidden="true">6.3.</strong> &lt;StrictMode&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react/Suspense.html"><strong aria-hidden="true">6.4.</strong> &lt;Suspense&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react/index.html"><strong aria-hidden="true">7.</strong> Hooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/useCallback.html"><strong aria-hidden="true">7.1.</strong> useCallback</a></li><li class="chapter-item expanded "><a href="../reference/react/useContext.html"><strong aria-hidden="true">7.2.</strong> useContext</a></li><li class="chapter-item expanded "><a href="../reference/react/useDebugValue.html"><strong aria-hidden="true">7.3.</strong> useDebugValue</a></li><li class="chapter-item expanded "><a href="../reference/react/useDeferredValue.html"><strong aria-hidden="true">7.4.</strong> useDeferredValue</a></li><li class="chapter-item expanded "><a href="../reference/react/useEffect.html"><strong aria-hidden="true">7.5.</strong> useEffect</a></li><li class="chapter-item expanded "><a href="../reference/react/useId.html"><strong aria-hidden="true">7.6.</strong> useId</a></li><li class="chapter-item expanded "><a href="../reference/react/useImperativeHandle.html"><strong aria-hidden="true">7.7.</strong> useImperativeHandle</a></li><li class="chapter-item expanded "><a href="../reference/react/useInsertionEffect.html"><strong aria-hidden="true">7.8.</strong> useInsertionEffect</a></li><li class="chapter-item expanded "><a href="../reference/react/useLayoutEffect.html"><strong aria-hidden="true">7.9.</strong> useLayoutEffect</a></li><li class="chapter-item expanded "><a href="../reference/react/useMemo.html"><strong aria-hidden="true">7.10.</strong> useMemo</a></li><li class="chapter-item expanded "><a href="../reference/react/useReducer.html"><strong aria-hidden="true">7.11.</strong> useReducer</a></li><li class="chapter-item expanded "><a href="../reference/react/useRef.html"><strong aria-hidden="true">7.12.</strong> useRef</a></li><li class="chapter-item expanded "><a href="../reference/react/useState.html"><strong aria-hidden="true">7.13.</strong> useState</a></li><li class="chapter-item expanded "><a href="../reference/react/useSyncExternalStore.html"><strong aria-hidden="true">7.14.</strong> useSyncExternalStore</a></li><li class="chapter-item expanded "><a href="../reference/react/useTransition.html"><strong aria-hidden="true">7.15.</strong> useTransition</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react/apis.html"><strong aria-hidden="true">8.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/createContext.html"><strong aria-hidden="true">8.1.</strong> createContext</a></li><li class="chapter-item expanded "><a href="../reference/react/forwardRef.html"><strong aria-hidden="true">8.2.</strong> forwardRef</a></li><li class="chapter-item expanded "><a href="../reference/react/lazy.html"><strong aria-hidden="true">8.3.</strong> lazy</a></li><li class="chapter-item expanded "><a href="../reference/react/memo.html"><strong aria-hidden="true">8.4.</strong> memo</a></li><li class="chapter-item expanded "><a href="../reference/react/startTransition.html"><strong aria-hidden="true">8.5.</strong> startTransition</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">'react-dom' package</li><li class="chapter-item expanded "><a href="../reference/react-dom/components/index.html"><strong aria-hidden="true">9.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/components/common.html"><strong aria-hidden="true">9.1.</strong> Common components (e.g. &lt;div&gt;)</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/input.html"><strong aria-hidden="true">9.2.</strong> &lt;input&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/option.html"><strong aria-hidden="true">9.3.</strong> &lt;option&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/progress.html"><strong aria-hidden="true">9.4.</strong> &lt;progress&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/select.html"><strong aria-hidden="true">9.5.</strong> &lt;select&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/textarea.html"><strong aria-hidden="true">9.6.</strong> &lt;textarea&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react-dom/index.html"><strong aria-hidden="true">10.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/createPortal.html"><strong aria-hidden="true">10.1.</strong> createPortal</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/flushSync.html"><strong aria-hidden="true">10.2.</strong> flushSync</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/findDOMNode.html"><strong aria-hidden="true">10.3.</strong> findDOMNode</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/hydrate.html"><strong aria-hidden="true">10.4.</strong> hydrate</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/render.html"><strong aria-hidden="true">10.5.</strong> render</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/unmountComponentAtNode.html"><strong aria-hidden="true">10.6.</strong> unmountComponentAtNode</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react-dom/client/index.html"><strong aria-hidden="true">11.</strong> Client APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/client/createRoot.html"><strong aria-hidden="true">11.1.</strong> createRoot</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/client/hydrateRoot.html"><strong aria-hidden="true">11.2.</strong> hydrateRoot</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/index.html"><strong aria-hidden="true">12.</strong> Server APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToNodeStream.html"><strong aria-hidden="true">12.1.</strong> renderToNodeStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToPipeableStream.html"><strong aria-hidden="true">12.2.</strong> renderToPipeableStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToReadableStream.html"><strong aria-hidden="true">12.3.</strong> renderToReadableStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToStaticMarkup.html"><strong aria-hidden="true">12.4.</strong> renderToStaticMarkup</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToStaticNodeStream.html"><strong aria-hidden="true">12.5.</strong> renderToStaticNodeStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToString.html"><strong aria-hidden="true">12.6.</strong> renderToString</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Legacy APIs</li><li class="chapter-item expanded "><a href="../reference/react/legacy.html"><strong aria-hidden="true">13.</strong> Legacy React APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/Children.html"><strong aria-hidden="true">13.1.</strong> Children</a></li><li class="chapter-item expanded "><a href="../reference/react/cloneElement.html"><strong aria-hidden="true">13.2.</strong> cloneElement</a></li><li class="chapter-item expanded "><a href="../reference/react/Component.html"><strong aria-hidden="true">13.3.</strong> Component</a></li><li class="chapter-item expanded "><a href="../reference/react/createElement.html"><strong aria-hidden="true">13.4.</strong> createElement</a></li><li class="chapter-item expanded "><a href="../reference/react/createFactory.html"><strong aria-hidden="true">13.5.</strong> createFactory</a></li><li class="chapter-item expanded "><a href="../reference/react/createRef.html"><strong aria-hidden="true">13.6.</strong> createRef</a></li><li class="chapter-item expanded "><a href="../reference/react/isValidElement.html"><strong aria-hidden="true">13.7.</strong> isValidElement</a></li><li class="chapter-item expanded "><a href="../reference/react/PureComponent.html"><strong aria-hidden="true">13.8.</strong> PureComponent</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">React 18 Docs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<h2 id="title-escape-hatches"><a class="header" href="#title-escape-hatches">title: Escape Hatches</a></h2>
<Intro>
<p>Some of your components may need to control and synchronize with systems outside of React. For example, you might need to focus an input using the browser API, play and pause a video player implemented without React, or connect and listen to messages from a remote server. In this chapter, you'll learn the escape hatches that let you &quot;step outside&quot; React and connect to external systems. Most of your application logic and data flow should not rely on these features.</p>
</Intro>
<YouWillLearn isChapter={true}>
<ul>
<li><a href="/learn/referencing-values-with-refs">How to &quot;remember&quot; information without re-rendering</a></li>
<li><a href="/learn/manipulating-the-dom-with-refs">How to access DOM elements managed by React</a></li>
<li><a href="/learn/synchronizing-with-effects">How to synchronize components with external systems</a></li>
<li><a href="/learn/you-might-not-need-an-effect">How to remove unnecessary Effects from your components</a></li>
<li><a href="/learn/lifecycle-of-reactive-effects">How an Effect's lifecycle is different from a component's</a></li>
<li><a href="/learn/separating-events-from-effects">How to prevent some values from re-triggering Effects</a></li>
<li><a href="/learn/removing-effect-dependencies">How to make your Effect re-run less often</a></li>
<li><a href="/learn/reusing-logic-with-custom-hooks">How to share logic between components</a></li>
</ul>
</YouWillLearn>
<h2 id="referencing-values-with-refs-referencing-values-with-refs"><a class="header" href="#referencing-values-with-refs-referencing-values-with-refs">Referencing values with refs {/<em>referencing-values-with-refs</em>/}</a></h2>
<p>When you want a component to &quot;remember&quot; some information, but you don't want that information to <a href="/learn/render-and-commit">trigger new renders</a>, you can use a <em>ref</em>:</p>
<pre><code class="language-js">const ref = useRef(0);
</code></pre>
<p>Like state, refs are retained by React between re-renders. However, setting state re-renders a component. Changing a ref does not! You can access the current value of that ref through the <code>ref.current</code> property.</p>
<Sandpack>
<pre><code class="language-js">import { useRef } from 'react';

export default function Counter() {
  let ref = useRef(0);

  function handleClick() {
    ref.current = ref.current + 1;
    alert('You clicked ' + ref.current + ' times!');
  }

  return (
    &lt;button onClick={handleClick}&gt;
      Click me!
    &lt;/button&gt;
  );
}
</code></pre>
</Sandpack>
<p>A ref is like a secret pocket of your component that React doesn't track. For example, you can use refs to store <a href="https://developer.mozilla.org/en-US/docs/Web/API/setTimeout#return_value">timeout IDs</a>, <a href="https://developer.mozilla.org/en-US/docs/Web/API/Element">DOM elements</a>, and other objects that don't impact the component's rendering output.</p>
<LearnMore path="/learn/referencing-values-with-refs">
<p>Read <strong><a href="/learn/referencing-values-with-refs">Referencing Values with Refs</a></strong> to learn how to use refs to remember information.</p>
</LearnMore>
<h2 id="manipulating-the-dom-with-refs-manipulating-the-dom-with-refs"><a class="header" href="#manipulating-the-dom-with-refs-manipulating-the-dom-with-refs">Manipulating the DOM with refs {/<em>manipulating-the-dom-with-refs</em>/}</a></h2>
<p>React automatically updates the DOM to match your render output, so your components won't often need to manipulate it. However, sometimes you might need access to the DOM elements managed by React‚Äîfor example, to focus a node, scroll to it, or measure its size and position. There is no built-in way to do those things in React, so you will need a ref to the DOM node. For example, clicking the button will focus the input using a ref:</p>
<Sandpack>
<pre><code class="language-js">import { useRef } from 'react';

export default function Form() {
  const inputRef = useRef(null);

  function handleClick() {
    inputRef.current.focus();
  }

  return (
    &lt;&gt;
      &lt;input ref={inputRef} /&gt;
      &lt;button onClick={handleClick}&gt;
        Focus the input
      &lt;/button&gt;
    &lt;/&gt;
  );
}
</code></pre>
</Sandpack>
<LearnMore path="/learn/manipulating-the-dom-with-refs">
<p>Read <strong><a href="/learn/manipulating-the-dom-with-refs">Manipulating the DOM with Refs</a></strong> to learn how to access DOM elements managed by React.</p>
</LearnMore>
<h2 id="synchronizing-with-effects-synchronizing-with-effects"><a class="header" href="#synchronizing-with-effects-synchronizing-with-effects">Synchronizing with Effects {/<em>synchronizing-with-effects</em>/}</a></h2>
<p>Some components need to synchronize with external systems. For example, you might want to control a non-React component based on the React state, set up a server connection, or send an analytics log when a component appears on the screen. Unlike event handlers, which let you handle particular events, <em>Effects</em> let you run some code after rendering. Use them to synchronize your component with some system outside of React.</p>
<p>Press Play/Pause multiple times and see how the video player stays synchronized to the <code>isPlaying</code> prop value:</p>
<Sandpack>
<pre><code class="language-js">import { useState, useRef, useEffect } from 'react';

function VideoPlayer({ src, isPlaying }) {
  const ref = useRef(null);

  useEffect(() =&gt; {
    if (isPlaying) {
      ref.current.play();
    } else {
      ref.current.pause();
    }
  }, [isPlaying]);

  return &lt;video ref={ref} src={src} loop playsInline /&gt;;
}

export default function App() {
  const [isPlaying, setIsPlaying] = useState(false);
  return (
    &lt;&gt;
      &lt;button onClick={() =&gt; setIsPlaying(!isPlaying)}&gt;
        {isPlaying ? 'Pause' : 'Play'}
      &lt;/button&gt;
      &lt;VideoPlayer
        isPlaying={isPlaying}
        src=&quot;https://interactive-examples.mdn.mozilla.net/media/cc0-videos/flower.mp4&quot;
      /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-css">button { display: block; margin-bottom: 20px; }
video { width: 250px; }
</code></pre>
</Sandpack>
<p>Many Effects also need to &quot;clean up&quot; after themselves. For example, if your Effect sets up a connection to a chat server, it should return a <em>cleanup function</em> that tells React how to disconnect your component from that server:</p>
<Sandpack>
<pre><code class="language-js">import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

export default function ChatRoom() {
  useEffect(() =&gt; {
    const connection = createConnection();
    connection.connect();
    return () =&gt; connection.disconnect();
  }, []);
  return &lt;h1&gt;Welcome to the chat!&lt;/h1&gt;;
}
</code></pre>
<pre><code class="language-js chat.js">export function createConnection() {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('‚úÖ Connecting...');
    },
    disconnect() {
      console.log('‚ùå Disconnected.');
    }
  };
}
</code></pre>
<pre><code class="language-css">input { display: block; margin-bottom: 20px; }
</code></pre>
</Sandpack>
<p>In development, React will immediately run and clean up your Effect one extra time. This is why you see <code>&quot;‚úÖ Connecting...&quot;</code> printed twice. This ensures that you don't forget to implement the cleanup function.</p>
<LearnMore path="/learn/synchronizing-with-effects">
<p>Read <strong><a href="/learn/synchronizing-with-effects">Synchronizing with Effects</a></strong> to learn how to synchronize components with external systems.</p>
</LearnMore>
<h2 id="you-might-not-need-an-effect-you-might-not-need-an-effect"><a class="header" href="#you-might-not-need-an-effect-you-might-not-need-an-effect">You Might Not Need An Effect {/<em>you-might-not-need-an-effect</em>/}</a></h2>
<p>Effects are an escape hatch from the React paradigm. They let you &quot;step outside&quot; of React and synchronize your components with some external system. If there is no external system involved (for example, if you want to update a component's state when some props or state change), you shouldn't need an Effect. Removing unnecessary Effects will make your code easier to follow, faster to run, and less error-prone.</p>
<p>There are two common cases in which you don't need Effects:</p>
<ul>
<li><strong>You don't need Effects to transform data for rendering.</strong></li>
<li><strong>You don't need Effects to handle user events.</strong></li>
</ul>
<p>For example, you don't need an Effect to adjust some state based on other state:</p>
<pre><code class="language-js {5-9}">function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');

  // üî¥ Avoid: redundant state and unnecessary Effect
  const [fullName, setFullName] = useState('');
  useEffect(() =&gt; {
    setFullName(firstName + ' ' + lastName);
  }, [firstName, lastName]);
  // ...
}
</code></pre>
<p>Instead, calculate as much as you can while rendering:</p>
<pre><code class="language-js {4-5}">function Form() {
  const [firstName, setFirstName] = useState('Taylor');
  const [lastName, setLastName] = useState('Swift');
  // ‚úÖ Good: calculated during rendering
  const fullName = firstName + ' ' + lastName;
  // ...
}
</code></pre>
<p>However, you <em>do</em> need Effects to synchronize with external systems. </p>
<LearnMore path="/learn/you-might-not-need-an-effect">
<p>Read <strong><a href="/learn/you-might-not-need-an-effect">You Might Not Need an Effect</a></strong> to learn how to remove unnecessary Effects.</p>
</LearnMore>
<h2 id="lifecycle-of-reactive-effects-lifecycle-of-reactive-effects"><a class="header" href="#lifecycle-of-reactive-effects-lifecycle-of-reactive-effects">Lifecycle of reactive effects {/<em>lifecycle-of-reactive-effects</em>/}</a></h2>
<p>Effects have a different lifecycle from components. Components may mount, update, or unmount. An Effect can only do two things: to start synchronizing something, and later to stop synchronizing it. This cycle can happen multiple times if your Effect depends on props and state that change over time.</p>
<p>This Effect depends on the value of the <code>roomId</code> prop. Props are <em>reactive values,</em> which means they can change on a re-render. Notice that the Effect <em>re-synchronizes</em> (and re-connects to the server) after you update the <code>roomId</code>:</p>
<Sandpack>
<pre><code class="language-js">import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  useEffect(() =&gt; {
    const connection = createConnection(serverUrl, roomId);
    connection.connect();
    return () =&gt; connection.disconnect();
  }, [roomId]);

  return &lt;h1&gt;Welcome to the {roomId} room!&lt;/h1&gt;;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    &lt;&gt;
      &lt;label&gt;
        Choose the chat room:{' '}
        &lt;select
          value={roomId}
          onChange={e =&gt; setRoomId(e.target.value)}
        &gt;
          &lt;option value=&quot;general&quot;&gt;general&lt;/option&gt;
          &lt;option value=&quot;travel&quot;&gt;travel&lt;/option&gt;
          &lt;option value=&quot;music&quot;&gt;music&lt;/option&gt;
        &lt;/select&gt;
      &lt;/label&gt;
      &lt;hr /&gt;
      &lt;ChatRoom roomId={roomId} /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js chat.js">export function createConnection(serverUrl, roomId) {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('‚úÖ Connecting to &quot;' + roomId + '&quot; room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('‚ùå Disconnected from &quot;' + roomId + '&quot; room at ' + serverUrl);
    }
  };
}
</code></pre>
<pre><code class="language-css">input { display: block; margin-bottom: 20px; }
button { margin-left: 10px; }
</code></pre>
</Sandpack>
<p>React provides a linter rule to check that you've specified your Effect's dependencies correctly. If you forget to specify <code>roomId</code> in the list of dependencies in the above example, the linter will find that bug automatically.</p>
<LearnMore path="/learn/lifecycle-of-reactive-effects">
<p>Read <strong><a href="/learn/lifecycle-of-reactive-effects">Lifecycle of Reactive Events</a></strong> to learn how an Effect's lifecycle is different from a component's.</p>
</LearnMore>
<h2 id="separating-events-from-effects-separating-events-from-effects"><a class="header" href="#separating-events-from-effects-separating-events-from-effects">Separating events from Effects {/<em>separating-events-from-effects</em>/}</a></h2>
<Wip>
<p>This section describes an <strong>experimental API that has not yet been added to React,</strong> so you can't use it yet.</p>
</Wip>
<p>Event handlers only re-run when you perform the same interaction again. Unlike event handlers, Effects re-synchronize if some value they read, like a prop or a state variable, is different from what it was on last render. Sometimes, you want a mix of both behaviors: an Effect that re-runs in response to some values but not others.</p>
<p>All code inside Effects is <em>reactive.</em> It will run again if some reactive value it reads has changed due to a re-render. For example, this Effect will re-connect to the chat if either <code>roomId</code> or <code>theme</code> have changed after interaction:</p>
<Sandpack>
<pre><code class="language-json package.json hidden">{
  &quot;dependencies&quot;: {
    &quot;react&quot;: &quot;latest&quot;,
    &quot;react-dom&quot;: &quot;latest&quot;,
    &quot;react-scripts&quot;: &quot;latest&quot;,
    &quot;toastify-js&quot;: &quot;1.12.0&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;react-scripts start&quot;,
    &quot;build&quot;: &quot;react-scripts build&quot;,
    &quot;test&quot;: &quot;react-scripts test --env=jsdom&quot;,
    &quot;eject&quot;: &quot;react-scripts eject&quot;
  }
}
</code></pre>
<pre><code class="language-js">import { useState, useEffect } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  useEffect(() =&gt; {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () =&gt; {
      showNotification('Connected!', theme);
    });
    connection.connect();
    return () =&gt; connection.disconnect();
  }, [roomId, theme]);

  return &lt;h1&gt;Welcome to the {roomId} room!&lt;/h1&gt;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    &lt;&gt;
      &lt;label&gt;
        Choose the chat room:{' '}
        &lt;select
          value={roomId}
          onChange={e =&gt; setRoomId(e.target.value)}
        &gt;
          &lt;option value=&quot;general&quot;&gt;general&lt;/option&gt;
          &lt;option value=&quot;travel&quot;&gt;travel&lt;/option&gt;
          &lt;option value=&quot;music&quot;&gt;music&lt;/option&gt;
        &lt;/select&gt;
      &lt;/label&gt;
      &lt;label&gt;
        &lt;input
          type=&quot;checkbox&quot;
          checked={isDark}
          onChange={e =&gt; setIsDark(e.target.checked)}
        /&gt;
        Use dark theme
      &lt;/label&gt;
      &lt;hr /&gt;
      &lt;ChatRoom
        roomId={roomId}
        theme={isDark ? 'dark' : 'light'} 
      /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js chat.js">export function createConnection(serverUrl, roomId) {
  // A real implementation would actually connect to the server
  let connectedCallback;
  let timeout;
  return {
    connect() {
      timeout = setTimeout(() =&gt; {
        if (connectedCallback) {
          connectedCallback();
        }
      }, 100);
    },
    on(event, callback) {
      if (connectedCallback) {
        throw Error('Cannot add the handler twice.');
      }
      if (event !== 'connected') {
        throw Error('Only &quot;connected&quot; event is supported.');
      }
      connectedCallback = callback;
    },
    disconnect() {
      clearTimeout(timeout);
    }
  };
}
</code></pre>
<pre><code class="language-js notifications.js">import Toastify from 'toastify-js';
import 'toastify-js/src/toastify.css';

export function showNotification(message, theme) {
  Toastify({
    text: message,
    duration: 2000,
    gravity: 'top',
    position: 'right',
    style: {
      background: theme === 'dark' ? 'black' : 'white',
      color: theme === 'dark' ? 'white' : 'black',
    },
  }).showToast();
}
</code></pre>
<pre><code class="language-css">label { display: block; margin-top: 10px; }
</code></pre>
</Sandpack>
<p>This is not ideal. You want to re-connect to the chat only if the <code>roomId</code> has changed. Switching the <code>theme</code> shouldn't re-connect to the chat! Move the code reading <code>theme</code> out of your Effect into an <em>Event function</em>:</p>
<Sandpack>
<pre><code class="language-json package.json hidden">{
  &quot;dependencies&quot;: {
    &quot;react&quot;: &quot;experimental&quot;,
    &quot;react-dom&quot;: &quot;experimental&quot;,
    &quot;react-scripts&quot;: &quot;latest&quot;,
    &quot;toastify-js&quot;: &quot;1.12.0&quot;
  },
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;react-scripts start&quot;,
    &quot;build&quot;: &quot;react-scripts build&quot;,
    &quot;test&quot;: &quot;react-scripts test --env=jsdom&quot;,
    &quot;eject&quot;: &quot;react-scripts eject&quot;
  }
}
</code></pre>
<pre><code class="language-js">import { useState, useEffect } from 'react';
import { experimental_useEvent as useEvent } from 'react';
import { createConnection, sendMessage } from './chat.js';
import { showNotification } from './notifications.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId, theme }) {
  const onConnected = useEvent(() =&gt; {
    showNotification('Connected!', theme);
  });

  useEffect(() =&gt; {
    const connection = createConnection(serverUrl, roomId);
    connection.on('connected', () =&gt; {
      onConnected();
    });
    connection.connect();
    return () =&gt; connection.disconnect();
  }, [roomId]);

  return &lt;h1&gt;Welcome to the {roomId} room!&lt;/h1&gt;
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  const [isDark, setIsDark] = useState(false);
  return (
    &lt;&gt;
      &lt;label&gt;
        Choose the chat room:{' '}
        &lt;select
          value={roomId}
          onChange={e =&gt; setRoomId(e.target.value)}
        &gt;
          &lt;option value=&quot;general&quot;&gt;general&lt;/option&gt;
          &lt;option value=&quot;travel&quot;&gt;travel&lt;/option&gt;
          &lt;option value=&quot;music&quot;&gt;music&lt;/option&gt;
        &lt;/select&gt;
      &lt;/label&gt;
      &lt;label&gt;
        &lt;input
          type=&quot;checkbox&quot;
          checked={isDark}
          onChange={e =&gt; setIsDark(e.target.checked)}
        /&gt;
        Use dark theme
      &lt;/label&gt;
      &lt;hr /&gt;
      &lt;ChatRoom
        roomId={roomId}
        theme={isDark ? 'dark' : 'light'} 
      /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js chat.js">export function createConnection(serverUrl, roomId) {
  // A real implementation would actually connect to the server
  let connectedCallback;
  let timeout;
  return {
    connect() {
      timeout = setTimeout(() =&gt; {
        if (connectedCallback) {
          connectedCallback();
        }
      }, 100);
    },
    on(event, callback) {
      if (connectedCallback) {
        throw Error('Cannot add the handler twice.');
      }
      if (event !== 'connected') {
        throw Error('Only &quot;connected&quot; event is supported.');
      }
      connectedCallback = callback;
    },
    disconnect() {
      clearTimeout(timeout);
    }
  };
}
</code></pre>
<pre><code class="language-js notifications.js hidden">import Toastify from 'toastify-js';
import 'toastify-js/src/toastify.css';

export function showNotification(message, theme) {
  Toastify({
    text: message,
    duration: 2000,
    gravity: 'top',
    position: 'right',
    style: {
      background: theme === 'dark' ? 'black' : 'white',
      color: theme === 'dark' ? 'white' : 'black',
    },
  }).showToast();
}
</code></pre>
<pre><code class="language-css">label { display: block; margin-top: 10px; }
</code></pre>
</Sandpack>
<p>Code inside Event functions isn't reactive, so changing the <code>theme</code> no longer makes your Effect re-connect.</p>
<LearnMore path="/learn/separating-events-from-effects">
<p>Read <strong><a href="/learn/separating-events-from-effects">Separating Events from Effects</a></strong> to learn how to prevent some values from re-triggering Effects.</p>
</LearnMore>
<h2 id="removing-effect-dependencies-removing-effect-dependencies"><a class="header" href="#removing-effect-dependencies-removing-effect-dependencies">Removing Effect dependencies {/<em>removing-effect-dependencies</em>/}</a></h2>
<p>When you write an Effect, the linter will verify that you've included every reactive value (like props and state) that the Effect reads in the list of your Effect's dependencies. This ensures that your Effect remains synchronized with the latest props and state of your component. Unnecessary dependencies may cause your Effect to run too often, or even create an infinite loop. The way you remove them depends on the case.</p>
<p>For example, this Effect depends on the <code>options</code> object which gets re-created every time you edit the input:</p>
<Sandpack>
<pre><code class="language-js">import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  const options = {
    serverUrl: serverUrl,
    roomId: roomId
  };

  useEffect(() =&gt; {
    const connection = createConnection(options);
    connection.connect();
    return () =&gt; connection.disconnect();
  }, [options]);

  return (
    &lt;&gt;
      &lt;h1&gt;Welcome to the {roomId} room!&lt;/h1&gt;
      &lt;input value={message} onChange={e =&gt; setMessage(e.target.value)} /&gt;
    &lt;/&gt;
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    &lt;&gt;
      &lt;label&gt;
        Choose the chat room:{' '}
        &lt;select
          value={roomId}
          onChange={e =&gt; setRoomId(e.target.value)}
        &gt;
          &lt;option value=&quot;general&quot;&gt;general&lt;/option&gt;
          &lt;option value=&quot;travel&quot;&gt;travel&lt;/option&gt;
          &lt;option value=&quot;music&quot;&gt;music&lt;/option&gt;
        &lt;/select&gt;
      &lt;/label&gt;
      &lt;hr /&gt;
      &lt;ChatRoom roomId={roomId} /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js chat.js">export function createConnection({ serverUrl, roomId }) {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('‚úÖ Connecting to &quot;' + roomId + '&quot; room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('‚ùå Disconnected from &quot;' + roomId + '&quot; room at ' + serverUrl);
    }
  };
}
</code></pre>
<pre><code class="language-css">input { display: block; margin-bottom: 20px; }
button { margin-left: 10px; }
</code></pre>
</Sandpack>
<p>You don't want the chat to re-connect every time you start typing a message in that chat. To fix this problem, move creation of the <code>options</code> object inside the Effect so that the Effect only depends on the <code>roomId</code> string:</p>
<Sandpack>
<pre><code class="language-js">import { useState, useEffect } from 'react';
import { createConnection } from './chat.js';

const serverUrl = 'https://localhost:1234';

function ChatRoom({ roomId }) {
  const [message, setMessage] = useState('');

  useEffect(() =&gt; {
    const options = {
      serverUrl: serverUrl,
      roomId: roomId
    };
    const connection = createConnection(options);
    connection.connect();
    return () =&gt; connection.disconnect();
  }, [roomId]);

  return (
    &lt;&gt;
      &lt;h1&gt;Welcome to the {roomId} room!&lt;/h1&gt;
      &lt;input value={message} onChange={e =&gt; setMessage(e.target.value)} /&gt;
    &lt;/&gt;
  );
}

export default function App() {
  const [roomId, setRoomId] = useState('general');
  return (
    &lt;&gt;
      &lt;label&gt;
        Choose the chat room:{' '}
        &lt;select
          value={roomId}
          onChange={e =&gt; setRoomId(e.target.value)}
        &gt;
          &lt;option value=&quot;general&quot;&gt;general&lt;/option&gt;
          &lt;option value=&quot;travel&quot;&gt;travel&lt;/option&gt;
          &lt;option value=&quot;music&quot;&gt;music&lt;/option&gt;
        &lt;/select&gt;
      &lt;/label&gt;
      &lt;hr /&gt;
      &lt;ChatRoom roomId={roomId} /&gt;
    &lt;/&gt;
  );
}
</code></pre>
<pre><code class="language-js chat.js">export function createConnection({ serverUrl, roomId }) {
  // A real implementation would actually connect to the server
  return {
    connect() {
      console.log('‚úÖ Connecting to &quot;' + roomId + '&quot; room at ' + serverUrl + '...');
    },
    disconnect() {
      console.log('‚ùå Disconnected from &quot;' + roomId + '&quot; room at ' + serverUrl);
    }
  };
}
</code></pre>
<pre><code class="language-css">input { display: block; margin-bottom: 20px; }
button { margin-left: 10px; }
</code></pre>
</Sandpack>
<p>Notice that you didn't start by editing the dependency list to remove the <code>options</code> dependency. That would be wrong. Instead, you changed the surrounding code so that the dependency became <em>unnecessary.</em> You can think of the dependency list as a list of all the reactive values used by your Effect's code. You don't intentionally choose what to put on that list. The list describes your code. To change the dependency list, change the code.</p>
<LearnMore path="/learn/removing-effect-dependencies">
<p>Read <strong><a href="/learn/removing-effect-dependencies">Removing Effect Dependencies</a></strong> to learn how to make your Effect re-run less often.</p>
</LearnMore>
<h2 id="reusing-logic-with-custom-hooks-reusing-logic-with-custom-hooks"><a class="header" href="#reusing-logic-with-custom-hooks-reusing-logic-with-custom-hooks">Reusing logic with custom Hooks {/<em>reusing-logic-with-custom-hooks</em>/}</a></h2>
<p>React comes with built-in Hooks like <code>useState</code>, <code>useContext</code>, and <code>useEffect</code>. Sometimes, you‚Äôll wish that there was a Hook for some more specific purpose: for example, to fetch data, to keep track of whether the user is online, or to connect to a chat room. To do this, you can create your own Hooks for your application's needs.</p>
<p>In this example, the <code>usePointerPosition</code> custom Hook tracks the cursor position, while <code>useDelayedValue</code> custom Hook returns a value that's &quot;lagging behind&quot; the value you passed by a certain number of milliseconds. Move the cursor over the sandbox preview area to see a moving trail of dots following the cursor:</p>
<Sandpack>
<pre><code class="language-js">import { usePointerPosition } from './usePointerPosition.js';
import { useDelayedValue } from './useDelayedValue.js';

export default function Canvas() {
  const pos1 = usePointerPosition();
  const pos2 = useDelayedValue(pos1, 100);
  const pos3 = useDelayedValue(pos2, 200);
  const pos4 = useDelayedValue(pos3, 100);
  const pos5 = useDelayedValue(pos3, 50);
  return (
    &lt;&gt;
      &lt;Dot position={pos1} opacity={1} /&gt;
      &lt;Dot position={pos2} opacity={0.8} /&gt;
      &lt;Dot position={pos3} opacity={0.6} /&gt;
      &lt;Dot position={pos4} opacity={0.4} /&gt;
      &lt;Dot position={pos5} opacity={0.2} /&gt;
    &lt;/&gt;
  );
}

function Dot({ position, opacity }) {
  return (
    &lt;div style={{
      position: 'absolute',
      backgroundColor: 'pink',
      borderRadius: '50%',
      opacity,
      transform: `translate(${position.x}px, ${position.y}px)`,
      pointerEvents: 'none',
      left: -20,
      top: -20,
      width: 40,
      height: 40,
    }} /&gt;
  );
}
</code></pre>
<pre><code class="language-js usePointerPosition.js">import { useState, useEffect } from 'react';

export function usePointerPosition() {
  const [position, setPosition] = useState({ x: 0, y: 0 });
  useEffect(() =&gt; {
    function handleMove(e) {
      setPosition({ x: e.clientX, y: e.clientY });
    }
    window.addEventListener('pointermove', handleMove);
    return () =&gt; window.removeEventListener('pointermove', handleMove);
  }, []);
  return position;
}
</code></pre>
<pre><code class="language-js useDelayedValue.js">import { useState, useEffect } from 'react';

export function useDelayedValue(value, delay) {
  const [delayedValue, setDelayedValue] = useState(value);

  useEffect(() =&gt; {
    setTimeout(() =&gt; {
      setDelayedValue(value);
    }, delay);
  }, [value, delay]);

  return delayedValue;
}
</code></pre>
<pre><code class="language-css">body { min-height: 300px; }
</code></pre>
</Sandpack>
<p>You can create custom Hooks, compose them together, pass data between them, and reuse them between components. As your app grows, you will write fewer Effects by hand because you'll be able to reuse custom Hooks you already wrote. There are also many excellent custom Hooks maintained by the React community.</p>
<LearnMore path="/learn/reusing-logic-with-custom-hooks">
<p>Read <strong><a href="/learn/reusing-logic-with-custom-hooks">Reusing Logic with Custom Hooks</a></strong> to learn how to share logic between components.</p>
</LearnMore>
<h2 id="whats-next-whats-next"><a class="header" href="#whats-next-whats-next">What's next? {/<em>whats-next</em>/}</a></h2>
<p>Head over to <a href="/learn/referencing-values-with-refs">Referencing Values with Refs</a> to start reading this chapter page by page!</p>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../learn/scaling-up-with-reducer-and-context.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../learn/referencing-values-with-refs.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../learn/scaling-up-with-reducer-and-context.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../learn/referencing-values-with-refs.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
