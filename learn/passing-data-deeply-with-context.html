<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Passing Data Deeply with Context - React 18 Docs</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><li class="part-title">Get Started</li><li class="chapter-item expanded "><a href="../learn/index.html"><strong aria-hidden="true">1.</strong> Quick Start</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/tutorial-tic-tac-toe.html"><strong aria-hidden="true">1.1.</strong> Tutorial: Tic-Tac-Toe</a></li><li class="chapter-item expanded "><a href="../learn/thinking-in-react.html"><strong aria-hidden="true">1.2.</strong> Thinking in React</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Learn React</li><li class="chapter-item expanded "><a href="../learn/describing-the-ui.html"><strong aria-hidden="true">2.</strong> Describing the UI</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/your-first-component.html"><strong aria-hidden="true">2.1.</strong> Your First Component</a></li><li class="chapter-item expanded "><a href="../learn/importing-and-exporting-components.html"><strong aria-hidden="true">2.2.</strong> Importing and Exporting Components</a></li><li class="chapter-item expanded "><a href="../learn/writing-markup-with-jsx.html"><strong aria-hidden="true">2.3.</strong> WritiPng Markup with JSX</a></li><li class="chapter-item expanded "><a href="../learn/javascript-in-jsx-with-curly-braces.html"><strong aria-hidden="true">2.4.</strong> JavaScript in JSX with Curly Braces</a></li><li class="chapter-item expanded "><a href="../learn/passing-props-to-a-component.html"><strong aria-hidden="true">2.5.</strong> Passing Props to a Component</a></li><li class="chapter-item expanded "><a href="../learn/conditional-rendering.html"><strong aria-hidden="true">2.6.</strong> Conditional Rendering</a></li><li class="chapter-item expanded "><a href="../learn/rendering-lists.html"><strong aria-hidden="true">2.7.</strong> Rendering Lists</a></li><li class="chapter-item expanded "><a href="../learn/keeping-components-pure.html"><strong aria-hidden="true">2.8.</strong> Keeping Components Pure</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/adding-interactivity.html"><strong aria-hidden="true">3.</strong> Adding Interactivity</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/responding-to-events.html"><strong aria-hidden="true">3.1.</strong> Responding to Events</a></li><li class="chapter-item expanded "><a href="../learn/state-a-components-memory.html"><strong aria-hidden="true">3.2.</strong> State: A Component's Memory</a></li><li class="chapter-item expanded "><a href="../learn/render-and-commit.html"><strong aria-hidden="true">3.3.</strong> Render and Commit</a></li><li class="chapter-item expanded "><a href="../learn/state-as-a-snapshot.html"><strong aria-hidden="true">3.4.</strong> State as a Snapshot</a></li><li class="chapter-item expanded "><a href="../learn/queueing-a-series-of-state-updates.html"><strong aria-hidden="true">3.5.</strong> Queueing a Series of State Updates</a></li><li class="chapter-item expanded "><a href="../learn/updating-objects-in-state.html"><strong aria-hidden="true">3.6.</strong> Updating Objects in State</a></li><li class="chapter-item expanded "><a href="../learn/updating-arrays-in-state.html"><strong aria-hidden="true">3.7.</strong> Updating Arrays in State</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/managing-state.html"><strong aria-hidden="true">4.</strong> Managing State</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/reacting-to-input-with-state.html"><strong aria-hidden="true">4.1.</strong> Reacting to Input with State</a></li><li class="chapter-item expanded "><a href="../learn/choosing-the-state-structure.html"><strong aria-hidden="true">4.2.</strong> Choosing the State Structure</a></li><li class="chapter-item expanded "><a href="../learn/sharing-state-between-components.html"><strong aria-hidden="true">4.3.</strong> Sharing State Between Components</a></li><li class="chapter-item expanded "><a href="../learn/preserving-and-resetting-state.html"><strong aria-hidden="true">4.4.</strong> Preserving and Resetting State</a></li><li class="chapter-item expanded "><a href="../learn/extracting-state-logic-into-a-reducer.html"><strong aria-hidden="true">4.5.</strong> Extracting State Logic into a Reducer</a></li><li class="chapter-item expanded "><a href="../learn/passing-data-deeply-with-context.html" class="active"><strong aria-hidden="true">4.6.</strong> Passing Data Deeply with Context</a></li><li class="chapter-item expanded "><a href="../learn/scaling-up-with-reducer-and-context.html"><strong aria-hidden="true">4.7.</strong> Scaling Up with Reducer and Context</a></li></ol></li><li class="chapter-item expanded "><a href="../learn/escape-hatches.html"><strong aria-hidden="true">5.</strong> Escape Hatches</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../learn/referencing-values-with-refs.html"><strong aria-hidden="true">5.1.</strong> Referencing Values with Refs</a></li><li class="chapter-item expanded "><a href="../learn/manipulating-the-dom-with-refs.html"><strong aria-hidden="true">5.2.</strong> Manipulating the DOM with Refs</a></li><li class="chapter-item expanded "><a href="../learn/synchronizing-with-effects.html"><strong aria-hidden="true">5.3.</strong> Synchronizing with Effects</a></li><li class="chapter-item expanded "><a href="../learn/you-might-not-need-an-effect.html"><strong aria-hidden="true">5.4.</strong> You Might Not Need an Effect</a></li><li class="chapter-item expanded "><a href="../learn/lifecycle-of-reactive-effects.html"><strong aria-hidden="true">5.5.</strong> Lifecycle of Reactive Effects</a></li><li class="chapter-item expanded "><a href="../learn/separating-events-from-effects.html"><strong aria-hidden="true">5.6.</strong> Separating Events from Effects</a></li><li class="chapter-item expanded "><a href="../learn/removing-effect-dependencies.html"><strong aria-hidden="true">5.7.</strong> Removing Effect Dependencies</a></li><li class="chapter-item expanded "><a href="../learn/reusing-logic-with-custom-hooks.html"><strong aria-hidden="true">5.8.</strong> Reusing Logic with Custom Hooks</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Reference</li><li class="chapter-item expanded affix "><li class="part-title">'react' package</li><li class="chapter-item expanded "><a href="../reference/react/components.html"><strong aria-hidden="true">6.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/Fragment.html"><strong aria-hidden="true">6.1.</strong> &lt;Fragment&gt; (&lt;&gt;...&lt;/&gt;)</a></li><li class="chapter-item expanded "><a href="../reference/react/Profiler.html"><strong aria-hidden="true">6.2.</strong> &lt;Profiler&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react/StrictMode.html"><strong aria-hidden="true">6.3.</strong> &lt;StrictMode&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react/Suspense.html"><strong aria-hidden="true">6.4.</strong> &lt;Suspense&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react/index.html"><strong aria-hidden="true">7.</strong> Hooks</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/useCallback.html"><strong aria-hidden="true">7.1.</strong> useCallback</a></li><li class="chapter-item expanded "><a href="../reference/react/useContext.html"><strong aria-hidden="true">7.2.</strong> useContext</a></li><li class="chapter-item expanded "><a href="../reference/react/useDebugValue.html"><strong aria-hidden="true">7.3.</strong> useDebugValue</a></li><li class="chapter-item expanded "><a href="../reference/react/useDeferredValue.html"><strong aria-hidden="true">7.4.</strong> useDeferredValue</a></li><li class="chapter-item expanded "><a href="../reference/react/useEffect.html"><strong aria-hidden="true">7.5.</strong> useEffect</a></li><li class="chapter-item expanded "><a href="../reference/react/useId.html"><strong aria-hidden="true">7.6.</strong> useId</a></li><li class="chapter-item expanded "><a href="../reference/react/useImperativeHandle.html"><strong aria-hidden="true">7.7.</strong> useImperativeHandle</a></li><li class="chapter-item expanded "><a href="../reference/react/useInsertionEffect.html"><strong aria-hidden="true">7.8.</strong> useInsertionEffect</a></li><li class="chapter-item expanded "><a href="../reference/react/useLayoutEffect.html"><strong aria-hidden="true">7.9.</strong> useLayoutEffect</a></li><li class="chapter-item expanded "><a href="../reference/react/useMemo.html"><strong aria-hidden="true">7.10.</strong> useMemo</a></li><li class="chapter-item expanded "><a href="../reference/react/useReducer.html"><strong aria-hidden="true">7.11.</strong> useReducer</a></li><li class="chapter-item expanded "><a href="../reference/react/useRef.html"><strong aria-hidden="true">7.12.</strong> useRef</a></li><li class="chapter-item expanded "><a href="../reference/react/useState.html"><strong aria-hidden="true">7.13.</strong> useState</a></li><li class="chapter-item expanded "><a href="../reference/react/useSyncExternalStore.html"><strong aria-hidden="true">7.14.</strong> useSyncExternalStore</a></li><li class="chapter-item expanded "><a href="../reference/react/useTransition.html"><strong aria-hidden="true">7.15.</strong> useTransition</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react/apis.html"><strong aria-hidden="true">8.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/createContext.html"><strong aria-hidden="true">8.1.</strong> createContext</a></li><li class="chapter-item expanded "><a href="../reference/react/forwardRef.html"><strong aria-hidden="true">8.2.</strong> forwardRef</a></li><li class="chapter-item expanded "><a href="../reference/react/lazy.html"><strong aria-hidden="true">8.3.</strong> lazy</a></li><li class="chapter-item expanded "><a href="../reference/react/memo.html"><strong aria-hidden="true">8.4.</strong> memo</a></li><li class="chapter-item expanded "><a href="../reference/react/startTransition.html"><strong aria-hidden="true">8.5.</strong> startTransition</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">'react-dom' package</li><li class="chapter-item expanded "><a href="../reference/react-dom/components/index.html"><strong aria-hidden="true">9.</strong> Components</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/components/common.html"><strong aria-hidden="true">9.1.</strong> Common components (e.g. &lt;div&gt;)</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/input.html"><strong aria-hidden="true">9.2.</strong> &lt;input&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/option.html"><strong aria-hidden="true">9.3.</strong> &lt;option&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/progress.html"><strong aria-hidden="true">9.4.</strong> &lt;progress&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/select.html"><strong aria-hidden="true">9.5.</strong> &lt;select&gt;</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/components/textarea.html"><strong aria-hidden="true">9.6.</strong> &lt;textarea&gt;</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react-dom/index.html"><strong aria-hidden="true">10.</strong> APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/createPortal.html"><strong aria-hidden="true">10.1.</strong> createPortal</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/flushSync.html"><strong aria-hidden="true">10.2.</strong> flushSync</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/findDOMNode.html"><strong aria-hidden="true">10.3.</strong> findDOMNode</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/hydrate.html"><strong aria-hidden="true">10.4.</strong> hydrate</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/render.html"><strong aria-hidden="true">10.5.</strong> render</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/unmountComponentAtNode.html"><strong aria-hidden="true">10.6.</strong> unmountComponentAtNode</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react-dom/client/index.html"><strong aria-hidden="true">11.</strong> Client APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/client/createRoot.html"><strong aria-hidden="true">11.1.</strong> createRoot</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/client/hydrateRoot.html"><strong aria-hidden="true">11.2.</strong> hydrateRoot</a></li></ol></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/index.html"><strong aria-hidden="true">12.</strong> Server APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToNodeStream.html"><strong aria-hidden="true">12.1.</strong> renderToNodeStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToPipeableStream.html"><strong aria-hidden="true">12.2.</strong> renderToPipeableStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToReadableStream.html"><strong aria-hidden="true">12.3.</strong> renderToReadableStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToStaticMarkup.html"><strong aria-hidden="true">12.4.</strong> renderToStaticMarkup</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToStaticNodeStream.html"><strong aria-hidden="true">12.5.</strong> renderToStaticNodeStream</a></li><li class="chapter-item expanded "><a href="../reference/react-dom/server/renderToString.html"><strong aria-hidden="true">12.6.</strong> renderToString</a></li></ol></li><li class="chapter-item expanded "><li class="part-title">Legacy APIs</li><li class="chapter-item expanded "><a href="../reference/react/legacy.html"><strong aria-hidden="true">13.</strong> Legacy React APIs</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="../reference/react/Children.html"><strong aria-hidden="true">13.1.</strong> Children</a></li><li class="chapter-item expanded "><a href="../reference/react/cloneElement.html"><strong aria-hidden="true">13.2.</strong> cloneElement</a></li><li class="chapter-item expanded "><a href="../reference/react/Component.html"><strong aria-hidden="true">13.3.</strong> Component</a></li><li class="chapter-item expanded "><a href="../reference/react/createElement.html"><strong aria-hidden="true">13.4.</strong> createElement</a></li><li class="chapter-item expanded "><a href="../reference/react/createFactory.html"><strong aria-hidden="true">13.5.</strong> createFactory</a></li><li class="chapter-item expanded "><a href="../reference/react/createRef.html"><strong aria-hidden="true">13.6.</strong> createRef</a></li><li class="chapter-item expanded "><a href="../reference/react/isValidElement.html"><strong aria-hidden="true">13.7.</strong> isValidElement</a></li><li class="chapter-item expanded "><a href="../reference/react/PureComponent.html"><strong aria-hidden="true">13.8.</strong> PureComponent</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">React 18 Docs</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <hr />
<h2 id="title-passing-data-deeply-with-context"><a class="header" href="#title-passing-data-deeply-with-context">title: Passing Data Deeply with Context</a></h2>
<Intro>
<p>Usually, you will pass information from a parent component to a child component via props. But passing props can become verbose and inconvenient if you have to pass them through many components in the middle, or if many components in your app need the same information. <em>Context</em> lets the parent component make some information available to any component in the tree below it—no matter how deep—without passing it explicitly through props.</p>
</Intro>
<YouWillLearn>
<ul>
<li>What &quot;prop drilling&quot; is</li>
<li>How to replace repetitive prop passing with context</li>
<li>Common use cases for context</li>
<li>Common alternatives to context</li>
</ul>
</YouWillLearn>
<h2 id="the-problem-with-passing-props-the-problem-with-passing-props"><a class="header" href="#the-problem-with-passing-props-the-problem-with-passing-props">The problem with passing props {/<em>the-problem-with-passing-props</em>/}</a></h2>
<p><a href="/learn/passing-props-to-a-component">Passing props</a> is a great way to explicitly pipe data through your UI tree to the components that use it.</p>
<p>But passing props can become verbose and inconvenient when you need to pass some prop deeply through the tree, or if many components need the same prop. The nearest common ancestor could be far removed from the components that need data, and <a href="/learn/sharing-state-between-components">lifting state up</a> that high can lead to a situation sometimes called &quot;prop drilling&quot;.</p>
<DiagramGroup>
<Diagram name="passing_data_lifting_state" height={160} width={608} captionPosition="top" alt="Diagram with a tree of three components. The parent contains a bubble representing a value highlighted in purple. The value flows down to each of the two children, both highlighted in purple." >
<p>Lifting state up</p>
</Diagram>
<Diagram name="passing_data_prop_drilling" height={430} width={608} captionPosition="top" alt="Diagram with a tree of ten nodes, each node with two children or less. The root node contains a bubble representing a value highlighted in purple. The value flows down through the two children, each of which pass the value but do not contain it. The left child passes the value down to two children which are both highlighted purple. The right child of the root passes the value through to one of its two children - the right one, which is highlighted purple. That child passed the value through its single child, which passes it down to both of its two children, which are highlighted purple.">
<p>Prop drilling</p>
</Diagram>
</DiagramGroup>
<p>Wouldn't it be great if there were a way to &quot;teleport&quot; data to the components in the tree that need it without passing props? With React's context feature, there is!</p>
<h2 id="context-an-alternative-to-passing-props-context-an-alternative-to-passing-props"><a class="header" href="#context-an-alternative-to-passing-props-context-an-alternative-to-passing-props">Context: an alternative to passing props {/<em>context-an-alternative-to-passing-props</em>/}</a></h2>
<p>Context lets a parent component provide data to the entire tree below it. There are many uses for context. Here is one example. Consider this <code>Heading</code> component that accepts a <code>level</code> for its size:</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function Page() {
  return (
    &lt;Section&gt;
      &lt;Heading level={1}&gt;Title&lt;/Heading&gt;
      &lt;Heading level={2}&gt;Heading&lt;/Heading&gt;
      &lt;Heading level={3}&gt;Sub-heading&lt;/Heading&gt;
      &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
      &lt;Heading level={5}&gt;Sub-sub-sub-heading&lt;/Heading&gt;
      &lt;Heading level={6}&gt;Sub-sub-sub-sub-heading&lt;/Heading&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">export default function Section({ children }) {
  return (
    &lt;section className=&quot;section&quot;&gt;
      {children}
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">export default function Heading({ level, children }) {
  switch (level) {
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}
</code></pre>
</Sandpack>
<p>Let's say you want multiple headings within the same <code>Section</code> to always have the same size:</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function Page() {
  return (
    &lt;Section&gt;
      &lt;Heading level={1}&gt;Title&lt;/Heading&gt;
      &lt;Section&gt;
        &lt;Heading level={2}&gt;Heading&lt;/Heading&gt;
        &lt;Heading level={2}&gt;Heading&lt;/Heading&gt;
        &lt;Heading level={2}&gt;Heading&lt;/Heading&gt;
        &lt;Section&gt;
          &lt;Heading level={3}&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading level={3}&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading level={3}&gt;Sub-heading&lt;/Heading&gt;
          &lt;Section&gt;
            &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
          &lt;/Section&gt;
        &lt;/Section&gt;
      &lt;/Section&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">export default function Section({ children }) {
  return (
    &lt;section className=&quot;section&quot;&gt;
      {children}
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">export default function Heading({ level, children }) {
  switch (level) {
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}
</code></pre>
</Sandpack>
<p>Currently, you pass the <code>level</code> prop to each <code>&lt;Heading&gt;</code> separately:</p>
<pre><code class="language-js">&lt;Section&gt;
  &lt;Heading level={3}&gt;About&lt;/Heading&gt;
  &lt;Heading level={3}&gt;Photos&lt;/Heading&gt;
  &lt;Heading level={3}&gt;Videos&lt;/Heading&gt;
&lt;/Section&gt;
</code></pre>
<p>It would be nice if you could pass the <code>level</code> prop to the <code>&lt;Section&gt;</code> component instead and remove it from the <code>&lt;Heading&gt;</code>. This way you could enforce that all headings in the same section have the same size:</p>
<pre><code class="language-js">&lt;Section level={3}&gt;
  &lt;Heading&gt;About&lt;/Heading&gt;
  &lt;Heading&gt;Photos&lt;/Heading&gt;
  &lt;Heading&gt;Videos&lt;/Heading&gt;
&lt;/Section&gt;
</code></pre>
<p>But how can the <code>&lt;Heading&gt;</code> component know the level of its closest <code>&lt;Section&gt;</code>? <strong>That would require some way for a child to &quot;ask&quot; for data from somewhere above in the tree.</strong></p>
<p>You can't do it with props alone. This is where context comes into play. You will do it in three steps:</p>
<ol>
<li><strong>Create</strong> a context. (You can call it <code>LevelContext</code>, since it's for the heading level.)</li>
<li><strong>Use</strong> that context from the component that needs the data. (<code>Heading</code> will use <code>LevelContext</code>.)</li>
<li><strong>Provide</strong> that context from the component that specifies the data. (<code>Section</code> will provide <code>LevelContext</code>.)</li>
</ol>
<p>Context lets a parent--even a distant one!--provide some data to the entire tree inside of it.</p>
<DiagramGroup>
<Diagram name="passing_data_context_close" height={160} width={608} captionPosition="top" alt="Diagram with a tree of three components. The parent contains a bubble representing a value highlighted in orange which projects down to the two children, each highlighted in orange." >
<p>Using context in close children</p>
</Diagram>
<Diagram name="passing_data_context_far" height={430} width={608} captionPosition="top" alt="Diagram with a tree of ten nodes, each node with two children or less. The root parent node contains a bubble representing a value highlighted in orange. The value projects down directly to four leaves and one intermediate component in the tree, which are all highlighted in orange. None of the other intermediate components are highlighted.">
<p>Using context in distant children</p>
</Diagram>
</DiagramGroup>
<h3 id="step-1-create-the-context-step-1-create-the-context"><a class="header" href="#step-1-create-the-context-step-1-create-the-context">Step 1: Create the context {/<em>step-1-create-the-context</em>/}</a></h3>
<p>First, you need to create the context. You'll need to <strong>export it from a file</strong> so that your components can use it:</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function Page() {
  return (
    &lt;Section&gt;
      &lt;Heading level={1}&gt;Title&lt;/Heading&gt;
      &lt;Section&gt;
        &lt;Heading level={2}&gt;Heading&lt;/Heading&gt;
        &lt;Heading level={2}&gt;Heading&lt;/Heading&gt;
        &lt;Heading level={2}&gt;Heading&lt;/Heading&gt;
        &lt;Section&gt;
          &lt;Heading level={3}&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading level={3}&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading level={3}&gt;Sub-heading&lt;/Heading&gt;
          &lt;Section&gt;
            &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
          &lt;/Section&gt;
        &lt;/Section&gt;
      &lt;/Section&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">export default function Section({ children }) {
  return (
    &lt;section className=&quot;section&quot;&gt;
      {children}
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">export default function Heading({ level, children }) {
  switch (level) {
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-js LevelContext.js active">import { createContext } from 'react';

export const LevelContext = createContext(1);
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}
</code></pre>
</Sandpack>
<p>The only argument to <code>createContext</code> is the <em>default</em> value. Here, <code>1</code> refers to the biggest heading level, but you could pass any kind of value (even an object). You will see the significance of the default value in the next step.</p>
<h3 id="step-2-use-the-context-step-2-use-the-context"><a class="header" href="#step-2-use-the-context-step-2-use-the-context">Step 2: Use the context {/<em>step-2-use-the-context</em>/}</a></h3>
<p>Import the <code>useContext</code> Hook from React and your context:</p>
<pre><code class="language-js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';
</code></pre>
<p>Currently, the <code>Heading</code> component reads <code>level</code> from props:</p>
<pre><code class="language-js">export default function Heading({ level, children }) {
  // ...
}
</code></pre>
<p>Instead, remove the <code>level</code> prop and read the value from the context you just imported, <code>LevelContext</code>:</p>
<pre><code class="language-js {2}">export default function Heading({ children }) {
  const level = useContext(LevelContext);
  // ...
}
</code></pre>
<p><code>useContext</code> is a Hook. Just like <code>useState</code> and <code>useReducer</code>, you can only call a Hook at the top level of a React component. <strong><code>useContext</code> tells React that the <code>Heading</code> component wants to read the <code>LevelContext</code>.</strong></p>
<p>Now that the <code>Heading</code> component doesn't have a <code>level</code> prop, you don't need to pass the level prop to <code>Heading</code> in your JSX like this anymore:</p>
<pre><code class="language-js">&lt;Section&gt;
  &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
  &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
  &lt;Heading level={4}&gt;Sub-sub-heading&lt;/Heading&gt;
&lt;/Section&gt;
</code></pre>
<p>Update the JSX so that it's the <code>Section</code> that receives it instead:</p>
<pre><code class="language-jsx">&lt;Section level={4}&gt;
  &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
  &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
  &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
&lt;/Section&gt;
</code></pre>
<p>As a reminder, this is the markup that you were trying to get working:</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function Page() {
  return (
    &lt;Section level={1}&gt;
      &lt;Heading&gt;Title&lt;/Heading&gt;
      &lt;Section level={2}&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Section level={3}&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Section level={4}&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
          &lt;/Section&gt;
        &lt;/Section&gt;
      &lt;/Section&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">export default function Section({ children }) {
  return (
    &lt;section className=&quot;section&quot;&gt;
      {children}
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Heading({ children }) {
  const level = useContext(LevelContext);
  switch (level) {
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-js LevelContext.js">import { createContext } from 'react';

export const LevelContext = createContext(1);
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}
</code></pre>
</Sandpack>
<p>Notice this example doesn't quite work, yet! All the headings have the same size because <strong>even though you're <em>using</em> the context, you have not <em>provided</em> it yet.</strong> React doesn't know where to get it!</p>
<p>If you don't provide the context, React will use the default value you've specified in the previous step. In this example, you specified <code>1</code> as the argument to <code>createContext</code>, so <code>useContext(LevelContext)</code> returns <code>1</code>, setting all those headings to <code>&lt;h1&gt;</code>. Let's fix this problem by having each <code>Section</code> provide its own context.</p>
<h3 id="step-3-provide-the-context-step-3-provide-the-context"><a class="header" href="#step-3-provide-the-context-step-3-provide-the-context">Step 3: Provide the context {/<em>step-3-provide-the-context</em>/}</a></h3>
<p>The <code>Section</code> component currently renders its children:</p>
<pre><code class="language-js">export default function Section({ children }) {
  return (
    &lt;section className=&quot;section&quot;&gt;
      {children}
    &lt;/section&gt;
  );
}
</code></pre>
<p><strong>Wrap them with a context provider</strong> to provide the <code>LevelContext</code> to them:</p>
<pre><code class="language-js {1 6 8}">import { LevelContext } from './LevelContext.js';

export default function Section({ level, children }) {
  return (
    &lt;section className=&quot;section&quot;&gt;
      &lt;LevelContext.Provider value={level}&gt;
        {children}
      &lt;/LevelContext.Provider&gt;
    &lt;/section&gt;
  );
}
</code></pre>
<p>This tells React: &quot;if any component inside this <code>&lt;Section&gt;</code> asks for <code>LevelContext</code>, give them this <code>level</code>.&quot; The component will use the value of the nearest <code>&lt;LevelContext.Provider&gt;</code> in the UI tree above it.</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function Page() {
  return (
    &lt;Section level={1}&gt;
      &lt;Heading&gt;Title&lt;/Heading&gt;
      &lt;Section level={2}&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Section level={3}&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Section level={4}&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
          &lt;/Section&gt;
        &lt;/Section&gt;
      &lt;/Section&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">import { LevelContext } from './LevelContext.js';

export default function Section({ level, children }) {
  return (
    &lt;section className=&quot;section&quot;&gt;
      &lt;LevelContext.Provider value={level}&gt;
        {children}
      &lt;/LevelContext.Provider&gt;
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Heading({ children }) {
  const level = useContext(LevelContext);
  switch (level) {
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-js LevelContext.js">import { createContext } from 'react';

export const LevelContext = createContext(1);
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}
</code></pre>
</Sandpack>
<p>It's the same result as the original code, but you did not need to pass the <code>level</code> prop to each <code>Heading</code> component! Instead, it &quot;figures out&quot; its heading level by asking the closest <code>Section</code> above:</p>
<ol>
<li>You pass a <code>level</code> prop to the <code>&lt;Section&gt;</code>.</li>
<li><code>Section</code> wraps its children into <code>&lt;LevelContext.Provider value={level}&gt;</code>.</li>
<li><code>Heading</code> asks the closest value of <code>LevelContext</code> above with <code>useContext(LevelContext)</code>.</li>
</ol>
<h2 id="using-and-providing-context-from-the-same-component-using-and-providing-context-from-the-same-component"><a class="header" href="#using-and-providing-context-from-the-same-component-using-and-providing-context-from-the-same-component">Using and providing context from the same component {/<em>using-and-providing-context-from-the-same-component</em>/}</a></h2>
<p>Currently, you still have to specify each section's <code>level</code> manually:</p>
<pre><code class="language-js">export default function Page() {
  return (
    &lt;Section level={1}&gt;
      ...
      &lt;Section level={2}&gt;
        ...
        &lt;Section level={3}&gt;
          ...
</code></pre>
<p>Since context lets you read information from a component above, each <code>Section</code> could read the <code>level</code> from the <code>Section</code> above, and pass <code>level + 1</code> down automatically. Here is how you could do it:</p>
<pre><code class="language-js Section.js {5 8}">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Section({ children }) {
  const level = useContext(LevelContext);
  return (
    &lt;section className=&quot;section&quot;&gt;
      &lt;LevelContext.Provider value={level + 1}&gt;
        {children}
      &lt;/LevelContext.Provider&gt;
    &lt;/section&gt;
  );
}
</code></pre>
<p>With this change, you don't need to pass the <code>level</code> prop <em>either</em> to the <code>&lt;Section&gt;</code> or to the <code>&lt;Heading&gt;</code>:</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function Page() {
  return (
    &lt;Section&gt;
      &lt;Heading&gt;Title&lt;/Heading&gt;
      &lt;Section&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Heading&gt;Heading&lt;/Heading&gt;
        &lt;Section&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Heading&gt;Sub-heading&lt;/Heading&gt;
          &lt;Section&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
            &lt;Heading&gt;Sub-sub-heading&lt;/Heading&gt;
          &lt;/Section&gt;
        &lt;/Section&gt;
      &lt;/Section&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Section({ children }) {
  const level = useContext(LevelContext);
  return (
    &lt;section className=&quot;section&quot;&gt;
      &lt;LevelContext.Provider value={level + 1}&gt;
        {children}
      &lt;/LevelContext.Provider&gt;
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Heading({ children }) {
  const level = useContext(LevelContext);
  switch (level) {
    case 0:
      throw Error('Heading must be inside a Section!');
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-js LevelContext.js">import { createContext } from 'react';

export const LevelContext = createContext(0);
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}
</code></pre>
</Sandpack>
<p>Now both <code>Heading</code> and <code>Section</code> read the <code>LevelContext</code> to figure out how &quot;deep&quot; they are. And the <code>Section</code> wraps its children into the <code>LevelContext</code> to specify that anything inside of it is at a &quot;deeper&quot; level.</p>
<blockquote>
<p>This example uses heading levels because they show visually how nested components can override context. But context is useful for many other use cases too. You can use it to pass down any information needed by the entire subtree: the current color theme, the currently logged in user, and so on.</p>
</blockquote>
<h2 id="context-passes-through-intermediate-components-context-passes-through-intermediate-components"><a class="header" href="#context-passes-through-intermediate-components-context-passes-through-intermediate-components">Context passes through intermediate components {/<em>context-passes-through-intermediate-components</em>/}</a></h2>
<p>You can insert as many components as you like between the component that provides context and the one that uses it. This includes both built-in components like <code>&lt;div&gt;</code> and components you might build yourself.</p>
<p>In this example, the same <code>Post</code> component (with a dashed border) is rendered at two different nesting levels. Notice that the <code>&lt;Heading&gt;</code> inside of it gets its level automatically from the closest <code>&lt;Section&gt;</code>:</p>
<Sandpack>
<pre><code class="language-js">import Heading from './Heading.js';
import Section from './Section.js';

export default function ProfilePage() {
  return (
    &lt;Section&gt;
      &lt;Heading&gt;My Profile&lt;/Heading&gt;
      &lt;Post
        title=&quot;Hello traveller!&quot;
        body=&quot;Read about my adventures.&quot;
      /&gt;
      &lt;AllPosts /&gt;
    &lt;/Section&gt;
  );
}

function AllPosts() {
  return (
    &lt;Section&gt;
      &lt;Heading&gt;Posts&lt;/Heading&gt;
      &lt;RecentPosts /&gt;
    &lt;/Section&gt;
  );
}

function RecentPosts() {
  return (
    &lt;Section&gt;
      &lt;Heading&gt;Recent Posts&lt;/Heading&gt;
      &lt;Post
        title=&quot;Flavors of Lisbon&quot;
        body=&quot;...those pastéis de nata!&quot;
      /&gt;
      &lt;Post
        title=&quot;Buenos Aires in the rhythm of tango&quot;
        body=&quot;I loved it!&quot;
      /&gt;
    &lt;/Section&gt;
  );
}

function Post({ title, body }) {
  return (
    &lt;Section isFancy={true}&gt;
      &lt;Heading&gt;
        {title}
      &lt;/Heading&gt;
      &lt;p&gt;&lt;i&gt;{body}&lt;/i&gt;&lt;/p&gt;
    &lt;/Section&gt;
  );
}
</code></pre>
<pre><code class="language-js Section.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Section({ children, isFancy }) {
  const level = useContext(LevelContext);
  return (
    &lt;section className={
      'section ' +
      (isFancy ? 'fancy' : '')
    }&gt;
      &lt;LevelContext.Provider value={level + 1}&gt;
        {children}
      &lt;/LevelContext.Provider&gt;
    &lt;/section&gt;
  );
}
</code></pre>
<pre><code class="language-js Heading.js">import { useContext } from 'react';
import { LevelContext } from './LevelContext.js';

export default function Heading({ children }) {
  const level = useContext(LevelContext);
  switch (level) {
    case 0:
      throw Error('Heading must be inside a Section!');
    case 1:
      return &lt;h1&gt;{children}&lt;/h1&gt;;
    case 2:
      return &lt;h2&gt;{children}&lt;/h2&gt;;
    case 3:
      return &lt;h3&gt;{children}&lt;/h3&gt;;
    case 4:
      return &lt;h4&gt;{children}&lt;/h4&gt;;
    case 5:
      return &lt;h5&gt;{children}&lt;/h5&gt;;
    case 6:
      return &lt;h6&gt;{children}&lt;/h6&gt;;
    default:
      throw Error('Unknown level: ' + level);
  }
}
</code></pre>
<pre><code class="language-js LevelContext.js">import { createContext } from 'react';

export const LevelContext = createContext(0);
</code></pre>
<pre><code class="language-css">.section {
  padding: 10px;
  margin: 5px;
  border-radius: 5px;
  border: 1px solid #aaa;
}

.fancy {
  border: 4px dashed pink;
}
</code></pre>
</Sandpack>
<p>You didn't do anything special for this to work. A <code>Section</code> specifies the context for the tree inside it, so you can insert a <code>&lt;Heading&gt;</code> anywhere, and it will have the correct size. Try it in the sandbox above!</p>
<p><strong>Context lets you write components that &quot;adapt to their surroundings&quot; and display themselves differently depending on <em>where</em> (or, in other words, <em>in which context</em>) they are being rendered.</strong></p>
<p>How context works might remind you of <a href="https://developer.mozilla.org/en-US/docs/Web/CSS/inheritance">CSS property inheritance.</a> In CSS, you can specify <code>color: blue</code> for a <code>&lt;div&gt;</code>, and any DOM node inside of it, no matter how deep, will inherit that color unless some other DOM node in the middle overrides it with <code>color: green</code>. Similarly, in React, the only way to override some context coming from above is to wrap children into a context provider with a different value.</p>
<p>In CSS, different properties like <code>color</code> and <code>background-color</code> don't override each other. You can set all  <code>&lt;div&gt;</code>'s <code>color</code> to red without impacting <code>background-color</code>. Similarly, <strong>different React contexts don't override each other.</strong> Each context that you make with <code>createContext()</code> is completely separate from other ones, and ties together components using and providing <em>that particular</em> context. One component may use or provide many different contexts without a problem.</p>
<h2 id="before-you-use-context-before-you-use-context"><a class="header" href="#before-you-use-context-before-you-use-context">Before you use context {/<em>before-you-use-context</em>/}</a></h2>
<p>Context is very tempting to use! However, this also means it's too easy to overuse it. <strong>Just because you need to pass some props several levels deep doesn't mean you should put that information into context.</strong></p>
<p>Here's a few alternatives you should consider before using context:</p>
<ol>
<li><strong>Start by <a href="/learn/passing-props-to-a-component">passing props.</a></strong> If your components are not trivial, it's not unusual to pass a dozen props down through a dozen components. It may feel like a slog, but it makes it very clear which components use which data! The person maintaining your code will be glad you've made the data flow explicit with props.</li>
<li><strong>Extract components and <a href="/learn/passing-props-to-a-component#passing-jsx-as-children">pass JSX as <code>children</code></a> to them.</strong> If you pass some data through many layers of intermediate components that don't use that data (and only pass it further down), this often means that you forgot to extract some components along the way. For example, maybe you pass data props like <code>posts</code> to visual components that don't use them directly, like <code>&lt;Layout posts={posts} /&gt;</code>. Instead, make <code>Layout</code> take <code>children</code> as a prop, and render <code>&lt;Layout&gt;&lt;Posts posts={posts} /&gt;&lt;/Layout&gt;</code>. This reduces the number of layers between the component specifying the data and the one that needs it.</li>
</ol>
<p>If neither of these approaches works well for you, consider context.</p>
<h2 id="use-cases-for-context-use-cases-for-context"><a class="header" href="#use-cases-for-context-use-cases-for-context">Use cases for context {/<em>use-cases-for-context</em>/}</a></h2>
<ul>
<li><strong>Theming:</strong> If your app lets the user change its appearance (e.g. dark mode), you can put a context provider at the top of your app, and use that context in components that need to adjust their visual look.</li>
<li><strong>Current account:</strong> Many components might need to know the currently logged in user. Putting it in context makes it convenient to read it anywhere in the tree. Some apps also let you operate multiple accounts at the same time (e.g. to leave a comment as a different user). In those cases, it can be convenient to wrap a part of the UI into a nested provider with a different current account value.</li>
<li><strong>Routing:</strong> Most routing solutions use context internally to hold the current route. This is how every link &quot;knows&quot; whether it's active or not. If you build your own router, you might want to do it too.</li>
<li><strong>Managing state:</strong> As your app grows, you might end up with a lot of state closer to the top of your app. Many distant components below may want to change it. It is common to <a href="/learn/scaling-up-with-reducer-and-context">use a reducer together with context</a> to manage complex state and pass it down to distant components without too much hassle.</li>
</ul>
<p>Context is not limited to static values. If you pass a different value on the next render, React will update all the components reading it below! This is why context is often used in combination with state.</p>
<p>In general, if some information is needed by distant components in different parts of the tree, it's a good indication that context will help you.</p>
<Recap>
<ul>
<li>Context lets a component provide some information to the entire tree below it.</li>
<li>To pass context:
<ol>
<li>Create and export it with <code>export const MyContext = createContext(defaultValue)</code>.</li>
<li>Pass it to the <code>useContext(MyContext)</code> Hook to read it in any child component, no matter how deep.</li>
<li>Wrap children into <code>&lt;MyContext.Provider value={...}&gt;</code> to provide it from a parent.</li>
</ol>
</li>
<li>Context passes through any components in the middle.</li>
<li>Context lets you write components that &quot;adapt to their surroundings&quot;.</li>
<li>Before you use context, try passing props or passing JSX as <code>children</code>.</li>
</ul>
</Recap>
<Challenges>
<h4 id="replace-prop-drilling-with-context-replace-prop-drilling-with-context"><a class="header" href="#replace-prop-drilling-with-context-replace-prop-drilling-with-context">Replace prop drilling with context {/<em>replace-prop-drilling-with-context</em>/}</a></h4>
<p>In this example, toggling the checkbox changes the <code>imageSize</code> prop passed to each <code>&lt;PlaceImage&gt;</code>. The checkbox state is held in the top-level <code>App</code> component, but each <code>&lt;PlaceImage&gt;</code> needs to be aware of it.</p>
<p>Currently, <code>App</code> passes <code>imageSize</code> to <code>List</code>, which passes it to each <code>Place</code>, which passes it to the <code>PlaceImage</code>. Remove the <code>imageSize</code> prop, and instead pass it from the <code>App</code> component directly to <code>PlaceImage</code>.</p>
<p>You can declare context in <code>Context.js</code>.</p>
<Sandpack>
<pre><code class="language-js App.js">import { useState } from 'react';
import { places } from './data.js';
import { getImageUrl } from './utils.js';

export default function App() {
  const [isLarge, setIsLarge] = useState(false);
  const imageSize = isLarge ? 150 : 100;
  return (
    &lt;&gt;
      &lt;label&gt;
        &lt;input
          type=&quot;checkbox&quot;
          checked={isLarge}
          onChange={e =&gt; {
            setIsLarge(e.target.checked);
          }}
        /&gt;
        Use large images
      &lt;/label&gt;
      &lt;hr /&gt;
      &lt;List imageSize={imageSize} /&gt;
    &lt;/&gt;
  )
}

function List({ imageSize }) {
  const listItems = places.map(place =&gt;
    &lt;li key={place.id}&gt;
      &lt;Place
        place={place}
        imageSize={imageSize}
      /&gt;
    &lt;/li&gt;
  );
  return &lt;ul&gt;{listItems}&lt;/ul&gt;;
}

function Place({ place, imageSize }) {
  return (
    &lt;&gt;
      &lt;PlaceImage
        place={place}
        imageSize={imageSize}
      /&gt;
      &lt;p&gt;
        &lt;b&gt;{place.name}&lt;/b&gt;
        {': ' + place.description}
      &lt;/p&gt;
    &lt;/&gt;
  );
}

function PlaceImage({ place, imageSize }) {
  return (
    &lt;img
      src={getImageUrl(place)}
      alt={place.name}
      width={imageSize}
      height={imageSize}
    /&gt;
  );
}
</code></pre>
<pre><code class="language-js Context.js">
</code></pre>
<pre><code class="language-js data.js">export const places = [{
  id: 0,
  name: 'Bo-Kaap in Cape Town, South Africa',
  description: 'The tradition of choosing bright colors for houses began in the late 20th century.',
  imageId: 'K9HVAGH'
}, {
  id: 1, 
  name: 'Rainbow Village in Taichung, Taiwan',
  description: 'To save the houses from demolition, Huang Yung-Fu, a local resident, painted all 1,200 of them in 1924.',
  imageId: '9EAYZrt'
}, {
  id: 2, 
  name: 'Macromural de Pachuca, Mexico',
  description: 'One of the largest murals in the world covering homes in a hillside neighborhood.',
  imageId: 'DgXHVwu'
}, {
  id: 3, 
  name: 'Selarón Staircase in Rio de Janeiro, Brazil',
  description: 'This landmark was created by Jorge Selarón, a Chilean-born artist, as a &quot;tribute to the Brazilian people.&quot;',
  imageId: 'aeO3rpI'
}, {
  id: 4, 
  name: 'Burano, Italy',
  description: 'The houses are painted following a specific color system dating back to 16th century.',
  imageId: 'kxsph5C'
}, {
  id: 5, 
  name: 'Chefchaouen, Marocco',
  description: 'There are a few theories on why the houses are painted blue, including that the color repells mosquitos or that it symbolizes sky and heaven.',
  imageId: 'rTqKo46'
}, {
  id: 6,
  name: 'Gamcheon Culture Village in Busan, South Korea',
  description: 'In 2009, the village was converted into a cultural hub by painting the houses and featuring exhibitions and art installations.',
  imageId: 'ZfQOOzf'
}];
</code></pre>
<pre><code class="language-js utils.js">export function getImageUrl(place) {
  return (
    'https://i.imgur.com/' +
    place.imageId +
    'l.jpg'
  );
}
</code></pre>
<pre><code class="language-css">ul { list-style-type: none; padding: 0px 10px; }
li { 
  margin-bottom: 10px; 
  display: grid; 
  grid-template-columns: auto 1fr;
  gap: 20px;
  align-items: center;
}
</code></pre>
</Sandpack>
<Solution>
<p>Remove <code>imageSize</code> prop from all the components.</p>
<p>Create and export <code>ImageSizeContext</code> from <code>Context.js</code>. Then wrap the List into <code>&lt;ImageSizeContext.Provider value={imageSize}&gt;</code> to pass the value down, and <code>useContext(ImageSizeContext)</code> to read it in the <code>PlaceImage</code>:</p>
<Sandpack>
<pre><code class="language-js App.js">import { useState, useContext } from 'react';
import { places } from './data.js';
import { getImageUrl } from './utils.js';
import { ImageSizeContext } from './Context.js';

export default function App() {
  const [isLarge, setIsLarge] = useState(false);
  const imageSize = isLarge ? 150 : 100;
  return (
    &lt;ImageSizeContext.Provider
      value={imageSize}
    &gt;
      &lt;label&gt;
        &lt;input
          type=&quot;checkbox&quot;
          checked={isLarge}
          onChange={e =&gt; {
            setIsLarge(e.target.checked);
          }}
        /&gt;
        Use large images
      &lt;/label&gt;
      &lt;hr /&gt;
      &lt;List /&gt;
    &lt;/ImageSizeContext.Provider&gt;
  )
}

function List() {
  const listItems = places.map(place =&gt;
    &lt;li key={place.id}&gt;
      &lt;Place place={place} /&gt;
    &lt;/li&gt;
  );
  return &lt;ul&gt;{listItems}&lt;/ul&gt;;
}

function Place({ place }) {
  return (
    &lt;&gt;
      &lt;PlaceImage place={place} /&gt;
      &lt;p&gt;
        &lt;b&gt;{place.name}&lt;/b&gt;
        {': ' + place.description}
      &lt;/p&gt;
    &lt;/&gt;
  );
}

function PlaceImage({ place }) {
  const imageSize = useContext(ImageSizeContext);
  return (
    &lt;img
      src={getImageUrl(place)}
      alt={place.name}
      width={imageSize}
      height={imageSize}
    /&gt;
  );
}
</code></pre>
<pre><code class="language-js Context.js">import { createContext } from 'react';

export const ImageSizeContext = createContext(500);
</code></pre>
<pre><code class="language-js data.js">export const places = [{
  id: 0,
  name: 'Bo-Kaap in Cape Town, South Africa',
  description: 'The tradition of choosing bright colors for houses began in the late 20th century.',
  imageId: 'K9HVAGH'
}, {
  id: 1, 
  name: 'Rainbow Village in Taichung, Taiwan',
  description: 'To save the houses from demolition, Huang Yung-Fu, a local resident, painted all 1,200 of them in 1924.',
  imageId: '9EAYZrt'
}, {
  id: 2, 
  name: 'Macromural de Pachuca, Mexico',
  description: 'One of the largest murals in the world covering homes in a hillside neighborhood.',
  imageId: 'DgXHVwu'
}, {
  id: 3, 
  name: 'Selarón Staircase in Rio de Janeiro, Brazil',
  description: 'This landmark was created by Jorge Selarón, a Chilean-born artist, as a &quot;tribute to the Brazilian people&quot;.',
  imageId: 'aeO3rpI'
}, {
  id: 4, 
  name: 'Burano, Italy',
  description: 'The houses are painted following a specific color system dating back to 16th century.',
  imageId: 'kxsph5C'
}, {
  id: 5, 
  name: 'Chefchaouen, Marocco',
  description: 'There are a few theories on why the houses are painted blue, including that the color repells mosquitos or that it symbolizes sky and heaven.',
  imageId: 'rTqKo46'
}, {
  id: 6,
  name: 'Gamcheon Culture Village in Busan, South Korea',
  description: 'In 2009, the village was converted into a cultural hub by painting the houses and featuring exhibitions and art installations.',
  imageId: 'ZfQOOzf'
}];
</code></pre>
<pre><code class="language-js utils.js">export function getImageUrl(place) {
  return (
    'https://i.imgur.com/' +
    place.imageId +
    'l.jpg'
  );
}
</code></pre>
<pre><code class="language-css">ul { list-style-type: none; padding: 0px 10px; }
li { 
  margin-bottom: 10px; 
  display: grid; 
  grid-template-columns: auto 1fr;
  gap: 20px;
  align-items: center;
}
</code></pre>
</Sandpack>
<p>Note how components in the middle don't need to pass <code>imageSize</code> anymore.</p>
</Solution>
</Challenges>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../learn/extracting-state-logic-into-a-reducer.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../learn/scaling-up-with-reducer-and-context.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../learn/extracting-state-logic-into-a-reducer.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../learn/scaling-up-with-reducer-and-context.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </body>
</html>
